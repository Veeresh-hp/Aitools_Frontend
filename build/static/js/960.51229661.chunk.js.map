{"version":3,"file":"static/js/960.51229661.chunk.js","mappings":"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","sources":["components/ToolOfTheDay.jsx","components/ToolDetailModal.jsx","components/MobileCategoryTabs.jsx","components/MobileTopNav.jsx","components/MobileSortMenu.jsx","components/ChatBot.jsx","components/PricingDropdown.jsx","components/UnifiedSortDropdown.jsx","components/Home.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { FaStar, FaArrowRight } from 'react-icons/fa';\r\nimport { useLanguage } from '../context/LanguageContext';\r\n\r\nimport toolsData from '../data/toolsData';\r\n\r\nconst ToolOfTheDay = () => {\r\n    const [tool, setTool] = useState(null);\r\n    const { t } = useLanguage();\r\n    const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\n    useEffect(() => {\r\n        fetch(`${API_URL}/api/tools/tool-of-the-day`)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (data.tool) {\r\n                    setTool(data.tool);\r\n                } else {\r\n                    // Fallback to static data\r\n                    pickStaticTool();\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.error(err);\r\n                pickStaticTool();\r\n            });\r\n    }, [API_URL]);\r\n\r\n    const pickStaticTool = () => {\r\n        // Flatten toolsData\r\n        const allTools = toolsData.flatMap(cat => cat.tools);\r\n        if (allTools.length > 0) {\r\n            // Seeded random based on date\r\n            const today = new Date().toISOString().slice(0, 10);\r\n            let hash = 0;\r\n            for (let i = 0; i < today.length; i++) {\r\n                hash = today.charCodeAt(i) + ((hash << 5) - hash);\r\n            }\r\n            const index = Math.abs(hash) % allTools.length;\r\n            setTool({...allTools[index], category: allTools[index].category || 'Featured'}); \r\n        }\r\n    };\r\n\r\n    if (!tool) return null;\r\n\r\n    const toSlug = (val) => {\r\n        return String(val || '')\r\n          .trim()\r\n          .toLowerCase()\r\n          .replace(/[^a-z0-9\\s-]/g, '')\r\n          .replace(/\\s+/g, '-')\r\n          .replace(/-+/g, '-');\r\n    };\r\n\r\n    const getImageSrc = (item) => {\r\n        if (item.image) return item.image;\r\n        if (item.logo) return item.logo;\r\n        // Try constructing path from public folder if it follows naming convention\r\n        // This assumes images are at /Images/<name>.jpg or similar\r\n        // For now, return null to trigger fallback if explicit image prop missing\r\n        return null;\r\n    };\r\n\r\n    const imageSrc = getImageSrc(tool) || (tool.name ? `/Images/${tool.name.replace(/\\s+/g, '')}.jpg` : null) || (tool.name ? `/Images/${tool.name.replace(/\\s+/g, '')}.png` : null);\r\n\r\n    return (\r\n        <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 mb-10 relative\">\r\n             {/* Section Label */}\r\n             <div className=\"flex items-center gap-2 mb-4\">\r\n                <div className=\"w-1 h-5 bg-[#FF6B00] rounded-full\" />\r\n                <h2 className=\"text-lg font-bold text-white uppercase tracking-wider\">\r\n                    {t('tool_of_the_day') || 'Spotlight'}\r\n                </h2>\r\n             </div>\r\n\r\n            <div className=\"relative rounded-2xl overflow-hidden p-[1px] bg-gradient-to-br from-[#FF6B00] via-purple-600 to-blue-600\">\r\n                <div className=\"absolute inset-0 bg-[#050505] m-[1px] rounded-2xl\" />\r\n                \r\n                <div className=\"relative bg-[#12121A]/90 backdrop-blur-xl rounded-2xl p-6 flex flex-col md:flex-row items-center gap-6 md:gap-8\">\r\n                     {/* Background Glow */}\r\n                    <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3/4 h-3/4 bg-blue-500/10 blur-[80px] rounded-full pointer-events-none\" />\r\n\r\n                    {/* Image */}\r\n                    <Link to={`/tools/${toSlug(tool.category || 'all')}/${toSlug(tool.name)}`} className=\"group w-full md:w-64 shrink-0 relative\">\r\n                        <div className=\"aspect-video rounded-xl overflow-hidden border border-white/10 bg-black/50 shadow-xl relative z-10 group-hover:scale-[1.02] transition-transform duration-500\">\r\n                             <img \r\n                                src={imageSrc} \r\n                                alt={tool.name} \r\n                                className=\"w-full h-full object-cover\"\r\n                                onError={(e) => {\r\n                                    e.target.onerror = null; \r\n                                    e.target.style.display = 'none';\r\n                                    e.target.nextSibling.style.display = 'flex';\r\n                                }}\r\n                             />\r\n                             {/* Fallback */}\r\n                             <div className=\"hidden absolute inset-0 items-center justify-center bg-gradient-to-br from-gray-800 to-black\">\r\n                                <span className=\"text-4xl\"></span>\r\n                             </div>\r\n                        </div>\r\n                        {/* Ring Decoration */}\r\n                        <div className=\"absolute inset-0 -z-10 bg-gradient-to-br from-[#FF6B00] to-blue-600 blur-md opacity-20 group-hover:opacity-40 transition-opacity\" />\r\n                    </Link>\r\n\r\n                    {/* Content */}\r\n                    <div className=\"flex-1 text-center md:text-left relative z-10\">\r\n                        <div className=\"inline-flex items-center gap-2 px-2.5 py-0.5 rounded-full bg-[#FF6B00]/10 border border-[#FF6B00]/20 text-[#FF6B00] text-[10px] font-bold uppercase tracking-widest mb-3\">\r\n                            <FaStar size={10} /> Featured Choice\r\n                        </div>\r\n                        \r\n                        <h3 className=\"text-2xl md:text-3xl font-black text-white mb-3 leading-tight\">\r\n                            {tool.name}\r\n                        </h3>\r\n                        \r\n                        <p className=\"text-sm text-gray-300 mb-6 max-w-xl leading-relaxed line-clamp-2\">\r\n                            {tool.shortDescription || tool.description}\r\n                        </p>\r\n\r\n                        {/* Features / Tags */}\r\n                        <div className=\"flex flex-wrap gap-2 mb-6\">\r\n                            {(tool.tags || tool.hashtags || []).slice(0, 4).map((tag, i) => (\r\n                                <div key={i} className=\"flex items-center gap-1.5 text-xs text-gray-300 bg-white/5 px-2.5 py-1.5 rounded-md border border-white/5\">\r\n                                    <span className=\"text-[#FF6B00]\"></span> {tag.replace(/#/g, '')}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        \r\n                        <div className=\"flex flex-wrap items-center justify-center md:justify-start gap-4\">\r\n                            <Link \r\n                                to={`/tools/${toSlug(tool.category || 'all')}/${toSlug(tool.name)}`}\r\n                                className=\"px-6 py-2.5 bg-[#FF6B00] hover:bg-[#E55A00] text-white rounded-lg font-bold text-xs transition-all shadow-lg shadow-orange-600/20 hover:shadow-orange-600/40 flex items-center gap-2 transform hover:-translate-y-0.5\"\r\n                            >\r\n                                {t('tool_visit') || 'Discover Tool'} <FaArrowRight />\r\n                            </Link>\r\n                            \r\n                            <div className=\"text-xs text-gray-400\">\r\n                                <span className=\"opacity-50\">Category:</span> <span className=\"text-white ml-1 font-medium\">{tool.category.replace(/-/g, ' ')}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ToolOfTheDay;\r\n","import React, { useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { m, AnimatePresence } from 'framer-motion';\r\nimport { FaExternalLinkAlt, FaBookmark, FaRegBookmark, FaTimes, FaStar, FaChartLine, FaDollarSign, FaTag, FaUsers, FaGlobe, FaLink, FaCopy, FaCheck } from 'react-icons/fa';\r\nimport { addRefToUrl } from '../utils/linkUtils';\r\n\r\nconst ToolDetailModal = ({ tool, onClose }) => {\r\n  const getToolKey = () => (tool && (tool.url || tool.name || tool.id)) || null;\r\n  const [saved, setSaved] = useState(false);\r\n  const [saveCount, setSaveCount] = useState(0);\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!tool) return;\r\n    try {\r\n      const raw = localStorage.getItem('ai_bookmarks');\r\n      const arr = raw ? JSON.parse(raw) : [];\r\n      const key = getToolKey();\r\n      setSaved(arr.includes(key));\r\n      setSaveCount(arr.includes(key) ? 1 : 0);\r\n    } catch (err) {\r\n      // ignore\r\n    }\r\n  }, [tool]);\r\n\r\n  useEffect(() => {\r\n    const onKey = (e) => {\r\n      if (e.key === 'Escape') onClose && onClose();\r\n    };\r\n    window.addEventListener('keydown', onKey);\r\n    return () => window.removeEventListener('keydown', onKey);\r\n  }, [onClose]);\r\n\r\n  // Lock body scroll when modal is open\r\n  useEffect(() => {\r\n    if (tool) {\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n    return () => {\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, [tool]);\r\n\r\n  const toggleBookmark = (e) => {\r\n    e && e.stopPropagation();\r\n    try {\r\n      const key = getToolKey();\r\n      const raw = localStorage.getItem('ai_bookmarks');\r\n      let arr = raw ? JSON.parse(raw) : [];\r\n      if (arr.includes(key)) {\r\n        arr = arr.filter(x => x !== key);\r\n        setSaved(false);\r\n      } else {\r\n        arr.push(key);\r\n        setSaved(true);\r\n      }\r\n      localStorage.setItem('ai_bookmarks', JSON.stringify(arr));\r\n      setSaveCount(arr.includes(key) ? 1 : 0);\r\n    } catch (err) {\r\n      console.error('bookmark error', err);\r\n    }\r\n  };\r\n\r\n  const copyToClipboard = () => {\r\n    if (tool.url || tool.link) {\r\n      navigator.clipboard.writeText(tool.url || tool.link);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n    }\r\n  };\r\n\r\n  console.log(' ToolDetailModal rendering, tool:', tool);\r\n\r\n  if (!tool) {\r\n    console.log(' Tool is null, not rendering modal');\r\n    return null;\r\n  }\r\n\r\n  console.log(' Rendering modal for tool:', tool.name);\r\n\r\n  // Extract or generate metadata\r\n  const pricing = tool.pricing || 'Free';\r\n  const category = tool.category ? tool.category.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ') : 'General';\r\n  const tags = tool.tags || ['AI Tool', 'Productivity'];\r\n  const rating = tool.rating || 4.5;\r\n  const users = tool.users || '10K+';\r\n\r\n  return ReactDOM.createPortal(\r\n    <div\r\n      className=\"fixed inset-0 flex items-center justify-center px-4 bg-black/90 backdrop-blur-md overflow-y-auto py-8 scrollbar-hide\"\r\n      style={{ zIndex: 99999 }}\r\n      onClick={onClose}\r\n    >\r\n      <div className=\"relative max-w-5xl w-full\">\r\n        {/* Glow effect */}\r\n        <div className=\"absolute -inset-1 bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 rounded-3xl blur-xl opacity-30\" />\r\n\r\n        {/* Modal content */}\r\n        <div\r\n          onClick={(e) => e.stopPropagation()}\r\n          className=\"relative bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl border border-purple-500/30 overflow-hidden max-h-[90vh] overflow-y-auto scrollbar-hide\"\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          style={{\r\n            scrollbarWidth: 'none', /* Firefox */\r\n            msOverflowStyle: 'none', /* IE and Edge */\r\n          }}\r\n        >\r\n          {/* Close Button */}\r\n          <button\r\n            onClick={onClose}\r\n            aria-label=\"Close\"\r\n            className=\"absolute top-6 right-6 z-10 p-3 rounded-full bg-gray-800/90 backdrop-blur-md text-white hover:bg-red-600 hover:rotate-90 transition-all duration-300 border border-gray-700 hover:border-red-500 shadow-lg\"\r\n          >\r\n            <FaTimes className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Hero Section with Image */}\r\n          <div className=\"relative h-72 bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-600 overflow-hidden\">\r\n            {/* Animated gradient overlay */}\r\n            <div className=\"absolute inset-0 bg-gradient-to-r from-purple-500/20 via-pink-500/20 to-blue-500/20 animate-gradient-x\" />\r\n\r\n            {tool.image ? (\r\n              <img\r\n                src={tool.image}\r\n                alt={tool.name}\r\n                className=\"w-full h-full object-cover opacity-90\"\r\n                onError={(e) => {\r\n                  e.target.style.display = 'none';\r\n                  e.target.parentElement.classList.add('flex', 'items-center', 'justify-center');\r\n                  e.target.parentElement.innerHTML = `<div class=\"text-6xl text-white/50\">${tool.name.charAt(0)}</div>`;\r\n                }}\r\n              />\r\n            ) : (\r\n              <div className=\"w-full h-full flex items-center justify-center\">\r\n                <div className=\"text-8xl text-white/30 font-bold\">{tool.name.charAt(0)}</div>\r\n              </div>\r\n            )}\r\n            <div className=\"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent\" />\r\n\r\n            {/* Tool Name Overlay */}\r\n            <div className=\"absolute bottom-6 left-6 right-6\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div>\r\n                  <h2 className=\"text-4xl font-bold text-white mb-2 drop-shadow-lg\">{tool.name}</h2>\r\n                  <div className=\"flex items-center gap-3\">\r\n                    {tool.badge && (\r\n                      <span className=\"px-3 py-1 rounded-full bg-yellow-500 text-black text-xs font-bold\">\r\n                        {tool.badge}\r\n                      </span>\r\n                    )}\r\n                    {tool.isNew && (\r\n                      <span className=\"px-3 py-1 rounded-full bg-green-500 text-white text-xs font-bold animate-pulse\">\r\n                         NEW\r\n                      </span>\r\n                    )}\r\n                    <span className=\"px-3 py-1 rounded-full bg-white/20 backdrop-blur-md text-white text-xs font-semibold\">\r\n                      {category}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleBookmark}\r\n                  className={`p-3 rounded-full backdrop-blur-md transition-all ${saved\r\n                      ? 'bg-yellow-500 text-white shadow-lg shadow-yellow-500/50'\r\n                      : 'bg-white/20 text-white hover:bg-white/30'\r\n                    }`}\r\n                >\r\n                  {saved ? <FaBookmark className=\"w-5 h-5\" /> : <FaRegBookmark className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Content Section */}\r\n          <div className=\"p-8\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n              {/* Left Column - Main Content */}\r\n              <div className=\"lg:col-span-2 space-y-6\">\r\n                {/* Description */}\r\n                <div>\r\n                  <h3 className=\"text-xl font-bold text-white mb-3 flex items-center gap-2\">\r\n                    <span className=\"w-1 h-6 bg-gradient-to-b from-purple-500 to-blue-500 rounded-full\" />\r\n                    About {tool.name}\r\n                  </h3>\r\n                  <p className=\"text-gray-300 leading-relaxed text-lg\">\r\n                    {tool.description}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Key Features */}\r\n                <div className=\"bg-gradient-to-br from-purple-500/10 to-blue-500/10 rounded-2xl p-6 border border-purple-500/20\">\r\n                  <h4 className=\"text-lg font-bold text-white mb-4 flex items-center gap-2\">\r\n                    <FaStar className=\"text-yellow-500\" />\r\n                    Key Features\r\n                  </h4>\r\n                  <ul className=\"space-y-3\">\r\n                    {(tool.features || [\r\n                      'AI-powered capabilities',\r\n                      'User-friendly interface',\r\n                      'Fast processing speed',\r\n                      'Reliable and secure'\r\n                    ]).map((feature, i) => (\r\n                      <li key={i} className=\"flex items-start gap-3 text-gray-300\">\r\n                        <span className=\"text-green-500 mt-1\"></span>\r\n                        <span>{feature}</span>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n\r\n                {/* Use Cases */}\r\n                <div className=\"bg-gradient-to-br from-cyan-500/10 to-blue-500/10 rounded-2xl p-6 border border-cyan-500/20\">\r\n                  <h4 className=\"text-lg font-bold text-white mb-4 flex items-center gap-2\">\r\n                    <FaChartLine className=\"text-cyan-500\" />\r\n                    Use Cases\r\n                  </h4>\r\n                  <div className=\"flex flex-wrap gap-3\">\r\n                    {(tool.useCases || [\r\n                      'Content Creation',\r\n                      'Business Automation',\r\n                      'Creative Projects',\r\n                      'Professional Use'\r\n                    ]).map((useCase, i) => (\r\n                      <span\r\n                        key={i}\r\n                        className=\"px-4 py-2 rounded-lg bg-cyan-500/20 text-cyan-300 text-sm font-medium border border-cyan-500/30\"\r\n                      >\r\n                        {useCase}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Right Column - Sidebar Info */}\r\n              <div className=\"space-y-4\">\r\n                {/* Quick Stats */}\r\n                <div className=\"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-6 border border-white/10\">\r\n                  <h4 className=\"text-white font-bold mb-4\">Quick Info</h4>\r\n                  <div className=\"space-y-4\">\r\n                    {/* Pricing */}\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-2 text-gray-400\">\r\n                        <FaDollarSign className=\"text-green-500\" />\r\n                        <span>Pricing</span>\r\n                      </div>\r\n                      <span className=\"text-white font-semibold px-3 py-1 rounded-lg bg-green-500/20 text-green-400\">\r\n                        {pricing}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* Rating */}\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-2 text-gray-400\">\r\n                        <FaStar className=\"text-yellow-500\" />\r\n                        <span>Rating</span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1 text-yellow-500 font-semibold\">\r\n                        {rating} <FaStar className=\"w-3 h-3\" />\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Users */}\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-2 text-gray-400\">\r\n                        <FaUsers className=\"text-blue-500\" />\r\n                        <span>Users</span>\r\n                      </div>\r\n                      <span className=\"text-white font-semibold\">{users}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Tags */}\r\n                <div className=\"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-6 border border-white/10\">\r\n                  <h4 className=\"text-white font-bold mb-4 flex items-center gap-2\">\r\n                    <FaTag className=\"text-pink-500\" />\r\n                    Tags\r\n                  </h4>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {tags.map((tag, i) => (\r\n                      <span\r\n                        key={i}\r\n                        className=\"px-3 py-1 rounded-full bg-pink-500/20 text-pink-300 text-sm border border-pink-500/30\"\r\n                      >\r\n                        #{tag}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Related Tools */}\r\n                <div className=\"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-6 border border-white/10\">\r\n                  <h4 className=\"text-white font-bold mb-4\">Related Tools</h4>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <a href=\"#\" className=\"block text-purple-400 hover:text-purple-300 transition-colors\">\r\n                       Similar Tool 1\r\n                    </a>\r\n                    <a href=\"#\" className=\"block text-purple-400 hover:text-purple-300 transition-colors\">\r\n                       Similar Tool 2\r\n                    </a>\r\n                    <a href=\"#\" className=\"block text-purple-400 hover:text-purple-300 transition-colors\">\r\n                       Similar Tool 3\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"mt-8 flex flex-wrap items-center gap-4\">\r\n              <a\r\n                href={addRefToUrl(tool.url || tool.link)}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"flex-1 min-w-[200px] flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-purple-500/50 transition-all hover:scale-105\"\r\n              >\r\n                <FaExternalLinkAlt />\r\n                Visit {tool.name}\r\n              </a>\r\n\r\n              <button\r\n                onClick={copyToClipboard}\r\n                className=\"px-6 py-4 bg-white/10 hover:bg-white/20 backdrop-blur-md text-white rounded-xl font-semibold border border-white/20 transition-all flex items-center gap-2\"\r\n              >\r\n                {copied ? <FaCheck className=\"text-green-500\" /> : <FaCopy />}\r\n                {copied ? 'Copied!' : 'Copy Link'}\r\n              </button>\r\n\r\n              <button\r\n                onClick={toggleBookmark}\r\n                className={`px-6 py-4 rounded-xl font-semibold transition-all flex items-center gap-2 ${saved\r\n                    ? 'bg-yellow-500 hover:bg-yellow-600 text-black'\r\n                    : 'bg-white/10 hover:bg-white/20 text-white border border-white/20'\r\n                  }`}\r\n              >\r\n                {saved ? <FaBookmark /> : <FaRegBookmark />}\r\n                {saved ? 'Saved' : 'Save'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          {/* Close Modal content div */}\r\n        </div>\r\n        {/* Close wrapper div */}\r\n      </div>\r\n      {/* Close outer div */}\r\n    </div>,\r\n    document.body\r\n  );\r\n};\r\n\r\nexport default ToolDetailModal;\r\n","import React, { useRef, useEffect, useState } from 'react';\r\n\r\n// Mobile sticky category tabs - simple, clean design\r\nexport default function MobileCategoryTabs({ categories = [], activeId = 'all', onSelect = () => {} }) {\r\n  const listRef = useRef(null);\r\n  const activeRef = useRef(null);\r\n\r\n  // Auto-scroll active tab into view\r\n  useEffect(() => {\r\n    const el = activeRef.current;\r\n    const list = listRef.current;\r\n    if (!el || !list) return;\r\n    const elRect = el.getBoundingClientRect();\r\n    const listRect = list.getBoundingClientRect();\r\n    if (elRect.left < listRect.left || elRect.right > listRect.right) {\r\n      el.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });\r\n    }\r\n  }, [activeId]);\r\n\r\n  if (!categories || categories.length === 0) return null;\r\n\r\n  return (\r\n    <div \r\n      className=\"md:hidden block w-full sticky z-40 backdrop-blur-md bg-black border-b border-white/5\" \r\n      style={{ top: '64px' }}\r\n    >\r\n      <nav\r\n        id=\"mobile-category-tabs\"\r\n        role=\"tablist\"\r\n        aria-label=\"Browse categories\"\r\n      >\r\n        <div className=\"px-3 py-2 overflow-x-auto scrollbar-hide\" style={{ WebkitOverflowScrolling: 'touch' }}>\r\n          <div\r\n            ref={listRef}\r\n            className=\"flex items-center gap-2\"\r\n            style={{ scrollBehavior: 'smooth' }}\r\n          >\r\n            {categories.map((c) => {\r\n              const isActive = c.id === activeId;\r\n              return (\r\n                <button\r\n                  key={c.id}\r\n                  ref={isActive ? activeRef : null}\r\n                  role=\"tab\"\r\n                  aria-selected={isActive}\r\n                  onClick={() => onSelect(c.id)}\r\n                  className={`flex-shrink-0 px-4 py-2.5 rounded-xl text-sm font-semibold whitespace-nowrap transition-all duration-200 border ${\r\n                    isActive\r\n                      ? 'bg-[#FF6B00] text-white border-orange-500 shadow-lg shadow-orange-500/20'\r\n                      : 'bg-white/5 text-gray-300 border-white/10 hover:bg-white/10 hover:text-white'\r\n                  }`}\r\n                  style={{ WebkitTapHighlightColor: 'transparent' }}\r\n                >\r\n                  {c.label}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        {/* Fade Indicator */}\r\n        <div className=\"absolute inset-y-0 right-0 w-8 bg-gradient-to-l from-[#0a0e27] to-transparent pointer-events-none\" />\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { motion as m, AnimatePresence } from 'framer-motion';\r\nimport Logo from '../assets/logo.png';\r\n\r\nimport { FaStar, FaSearch, FaArrowLeft, FaTimes } from 'react-icons/fa';\r\n\r\nexport default function MobileTopNav({ \r\n    categories = [], \r\n    onCategorySelect = () => { }, \r\n    onChoiceClick = () => { }, \r\n    onLogoClick = () => { },\r\n    searchQuery = '',\r\n    onSearchChange = () => {} \r\n}) {\r\n  const [dropdownOpen, setDropdownOpen] = useState(false);\r\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n  const searchInputRef = useRef(null);\r\n\r\n  // Close dropdown on outside click\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(e.target)) {\r\n        setDropdownOpen(false);\r\n      }\r\n    };\r\n    if (dropdownOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }\r\n  }, [dropdownOpen]);\r\n\r\n  // Focus search input when opening\r\n  useEffect(() => {\r\n    if (isSearchOpen && searchInputRef.current) {\r\n        setTimeout(() => searchInputRef.current.focus(), 100);\r\n    }\r\n  }, [isSearchOpen]);\r\n\r\n  const handleCategorySelect = (id) => {\r\n    onCategorySelect(id);\r\n    setDropdownOpen(false);\r\n  };\r\n\r\n  return (\r\n    <header className=\"md:hidden fixed top-0 left-0 right-0 z-[1000] bg-black/95 backdrop-blur-xl border-b border-white/10 shadow-lg transition-all duration-300\">\r\n      {/* Navbar Container */}\r\n      <div className=\"flex items-center justify-between px-4 py-3 h-16 relative\">\r\n        \r\n        <AnimatePresence mode=\"wait\">\r\n            {isSearchOpen ? (\r\n                /* Search Bar Mode */\r\n                <m.div \r\n                    key=\"search-bar\"\r\n                    initial={{ opacity: 0, x: 20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    exit={{ opacity: 0, x: 20 }}\r\n                    transition={{ duration: 0.2 }}\r\n                    className=\"absolute inset-0 flex items-center px-4 gap-3 bg-black/95\"\r\n                >\r\n                    <button \r\n                        onClick={() => {\r\n                            setIsSearchOpen(false);\r\n                            onSearchChange({ target: { value: '' } }); // Optional: clear search on close? Maybe not.\r\n                        }}\r\n                        className=\"p-2 -ml-2 text-gray-400 hover:text-white\"\r\n                    >\r\n                        <FaArrowLeft />\r\n                    </button>\r\n                    <form \r\n                        className=\"flex-1 relative\"\r\n                        onSubmit={(e) => {\r\n                            e.preventDefault();\r\n                            if (searchInputRef.current) searchInputRef.current.blur();\r\n                        }}\r\n                    >\r\n                        <FaSearch className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm\" />\r\n                        <input\r\n                            ref={searchInputRef}\r\n                            type=\"text\"\r\n                            enterKeyHint=\"search\"\r\n                            value={searchQuery}\r\n                            onChange={onSearchChange}\r\n                            placeholder=\"Search tools...\"\r\n                            className=\"w-full bg-white/10 border border-white/10 rounded-xl pl-9 pr-8 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#FF6B00]/50\"\r\n                        />\r\n                        {searchQuery && (\r\n                            <button \r\n                                type=\"button\"\r\n                                onClick={() => onSearchChange({ target: { value: '' } })}\r\n                                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-500\"\r\n                            >\r\n                                <FaTimes className=\"text-xs\" />\r\n                            </button>\r\n                        )}\r\n                    </form>\r\n                </m.div>\r\n            ) : (\r\n                /* Standard Mode */\r\n                <m.div \r\n                    key=\"standard-nav\"\r\n                    initial={{ opacity: 0, x: -20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    exit={{ opacity: 0, x: -20 }}\r\n                    transition={{ duration: 0.2 }}\r\n                    className=\"flex items-center justify-between w-full\"\r\n                >\r\n                    {/* Left: Logo */}\r\n                    <button onClick={onLogoClick} className=\"flex items-center gap-2 flex-shrink-0 group\">\r\n                    <img\r\n                        src={Logo}\r\n                        alt=\"AI Tools Hub\"\r\n                        className=\"w-10 h-10 rounded-lg group-hover:scale-105 transition-transform duration-200\"\r\n                    />\r\n                    <span className=\"text-base font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent\">\r\n                        AI Tools\r\n                    </span>\r\n                    </button>\r\n\r\n                    {/* Right: Actions */}\r\n                    <div className=\"flex items-center gap-2\">\r\n                        {/* Search Trigger */}\r\n                        <button\r\n                            onClick={() => setIsSearchOpen(true)}\r\n                            className=\"p-2.5 rounded-lg text-gray-300 hover:text-white hover:bg-white/10 transition-colors\"\r\n                        >\r\n                            <FaSearch />\r\n                        </button>\r\n\r\n                        {/* Categories Dropdown */}\r\n                        <div className=\"relative\" ref={dropdownRef}>\r\n                            <m.button\r\n                            onClick={() => setDropdownOpen(!dropdownOpen)}\r\n                            whileHover={{ scale: 1.02 }}\r\n                            whileTap={{ scale: 0.98 }}\r\n                            className=\"flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-semibold text-white bg-white/5 border border-white/10 hover:bg-white/10 hover:border-white/20 transition-all duration-200\"\r\n                            >\r\n                            <span>Categories</span>\r\n                            <m.span\r\n                                animate={{ rotate: dropdownOpen ? 180 : 0 }}\r\n                                transition={{ duration: 0.2 }}\r\n                            >\r\n                                \r\n                            </m.span>\r\n                            </m.button>\r\n\r\n                            {/* Dropdown Menu */}\r\n                            {dropdownOpen && (\r\n                            <m.div\r\n                                initial={{ opacity: 0, y: -8 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                exit={{ opacity: 0, y: -8 }}\r\n                                transition={{ duration: 0.15 }}\r\n                                className=\"absolute top-full mt-2 -right-2 w-64 bg-[#0F0F0F] backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden z-[2000] p-2\"\r\n                            >\r\n                                <div className=\"max-h-[60vh] overflow-y-auto scrollbar-hide space-y-1\">\r\n                                {categories.map((cat) => (\r\n                                    <button\r\n                                    key={cat.id}\r\n                                    onClick={() => handleCategorySelect(cat.id)}\r\n                                    className=\"w-full text-left px-4 py-3 text-sm font-medium text-gray-300 hover:bg-white/10 hover:text-white rounded-xl transition-all duration-200\"\r\n                                    >\r\n                                    {cat.label}\r\n                                    </button>\r\n                                ))}\r\n                                </div>\r\n                            </m.div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* AI Picks Button - Hidden on very small screens if needed, but keeping for now */}\r\n                        <m.button\r\n                            onClick={onChoiceClick}\r\n                            whileHover={{ scale: 1.02 }}\r\n                            whileTap={{ scale: 0.98 }}\r\n                            className=\"flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-semibold text-white bg-[#FF6B00] border border-orange-500/30 hover:bg-[#ff8533] hover:border-orange-400/50 transition-all duration-200 shadow-lg shadow-orange-500/20\"\r\n                        >\r\n                            <FaStar className=\"text-yellow-400 animate-pulse text-xs\" />\r\n                            {/* Shorten label or hide text on small screens if needed */}\r\n                            <span className=\"hidden sm:inline\">Picks</span>\r\n                            <span className=\"sm:hidden\">Top</span>\r\n                        </m.button>\r\n                    </div>\r\n                </m.div>\r\n            )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { motion as m, AnimatePresence } from 'framer-motion';\r\n\r\n// --- Mobile Combined Sort & Pricing Menu ---\r\nconst MobileSortMenu = ({ activePricing, setActivePricing, sortOrder, setSortOrder }) => {\r\n    const [open, setOpen] = useState(false);\r\n    const ref = useRef(null);\r\n\r\n    // Unified option list: first pricing filters then sort options\r\n    const options = [\r\n        { type: 'pricing', value: 'free', label: 'Free' },\r\n        { type: 'pricing', value: 'freemium', label: 'Freemium' },\r\n        { type: 'pricing', value: 'open-source', label: 'Open Source' },\r\n        { type: 'pricing', value: 'paid', label: 'Paid' },\r\n        { type: 'sort', value: 'date', label: 'Date Added' },\r\n        { type: 'sort', value: 'name_asc', label: 'Name (A-Z)' },\r\n        { type: 'sort', value: 'name_desc', label: 'Name (Z-A)' }\r\n    ];\r\n\r\n\r\n    // Lock body scroll when open\r\n    useEffect(() => {\r\n        if (open) {\r\n            document.body.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = '';\r\n        }\r\n        return () => {\r\n            document.body.style.overflow = '';\r\n        };\r\n    }, [open]);\r\n\r\n    // Helper to produce a compact summary (pricing + sort)\r\n    const summaryLabel = () => {\r\n        const pricingLabel = activePricing !== 'all' ? options.find(o => o.type === 'pricing' && o.value === activePricing)?.label : 'All';\r\n        const sortLabel = options.find(o => o.type === 'sort' && o.value === sortOrder)?.label || 'Date Added';\r\n        return `${pricingLabel}  ${sortLabel}`;\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            <button\r\n                onClick={() => setOpen(o => !o)}\r\n                className=\"px-3 py-1.5 text-[10px] font-bold uppercase tracking-wider rounded-lg bg-white/5 backdrop-blur-md text-white border border-white/10 hover:bg-white/20 transition-all duration-200 flex items-center gap-2 shadow-sm\"\r\n                aria-haspopup=\"true\"\r\n                aria-expanded={open}\r\n            >\r\n                <span className=\"flex items-center gap-1.5\">\r\n                    <span className=\"text-xs\"></span>\r\n                    <span>Sort</span>\r\n                </span>\r\n                <span className=\"ml-auto text-[9px] text-gray-400 hidden sm:inline-block truncate max-w-[80px] border-l border-white/10 pl-2\">{summaryLabel()}</span>\r\n                <span className={`transition-transform duration-200 text-[10px] ${open ? 'rotate-180' : ''}`}></span>\r\n            </button>\r\n            {/* Bottom Sheet Backdrop & Panel */}\r\n            {/* Bottom Sheet Backdrop & Panel - Portalled to body to cover bottom nav */}\r\n            {typeof document !== 'undefined' && createPortal(\r\n                <AnimatePresence>\r\n                    {open && (\r\n                        <>\r\n                            {/* Backdrop */}\r\n                            <m.div\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                exit={{ opacity: 0 }}\r\n                                onClick={() => setOpen(false)}\r\n                                className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-[9990]\"\r\n                            />\r\n                            {/* Sheet */}\r\n                            <m.div\r\n                                initial={{ y: \"100%\" }}\r\n                                animate={{ y: 0 }}\r\n                                exit={{ y: \"100%\" }}\r\n                                transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\r\n                                className=\"fixed bottom-0 left-0 right-0 bg-[#121212] rounded-t-3xl border-t border-white/10 z-[9999] overflow-hidden shadow-2xl safe-area-bottom\"\r\n                            >\r\n                                {/* Handle */}\r\n                                <div className=\"w-full flex justify-center pt-3 pb-1\" onClick={() => setOpen(false)}>\r\n                                    <div className=\"w-12 h-1.5 bg-white/20 rounded-full\" />\r\n                                </div>\r\n\r\n                                <div className=\"p-4 space-y-4 max-h-[70vh] overflow-y-auto pb-24\">\r\n                                    {/* Header */}\r\n                                    <div className=\"flex items-center justify-between pb-2 border-b border-white/5\">\r\n                                        <h3 className=\"text-lg font-bold text-white\">Sort & Filter</h3>\r\n                                        <button \r\n                                            onClick={() => setOpen(false)}\r\n                                            className=\"p-2 text-gray-400 hover:text-white\"\r\n                                        >\r\n                                            \r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {/* Content Grid */}\r\n                                    <div className=\"space-y-6\">\r\n                                        {/* Pricing Section */}\r\n                                        <div className=\"space-y-3\">\r\n                                            <div className=\"text-xs font-bold uppercase tracking-wider text-gray-500 ml-1\">Pricing</div>\r\n                                            <div className=\"grid grid-cols-2 gap-2\">\r\n                                                {options.filter(o => o.type === 'pricing').map(opt => {\r\n                                                    const active = activePricing === opt.value;\r\n                                                    return (\r\n                                                        <button\r\n                                                            key={opt.value}\r\n                                                            onClick={() => {\r\n                                                                if (activePricing === opt.value) setActivePricing('all');\r\n                                                                else setActivePricing(opt.value);\r\n                                                                setOpen(false);\r\n                                                            }}\r\n                                                            className={`px-3 py-3 text-sm font-medium rounded-xl border transition-all ${\r\n                                                                active \r\n                                                                ? 'bg-[#FF6B00] text-white border-[#FF6B00] shadow-lg' \r\n                                                                : 'bg-white/5 text-gray-400 border-white/5 hover:bg-white/10'\r\n                                                            }`}\r\n                                                        >\r\n                                                            {opt.label}\r\n                                                        </button>\r\n                                                    );\r\n                                                })}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Sort Section */}\r\n                                        <div className=\"space-y-3\">\r\n                                            <div className=\"text-xs font-bold uppercase tracking-wider text-gray-500 ml-1\">Sort By</div>\r\n                                            <div className=\"flex flex-col gap-2\">\r\n                                                {options.filter(o => o.type === 'sort').map(opt => {\r\n                                                    const active = sortOrder === opt.value;\r\n                                                    return (\r\n                                                        <button\r\n                                                            key={opt.value}\r\n                                                            onClick={() => {\r\n                                                                setSortOrder(opt.value);\r\n                                                                setOpen(false);\r\n                                                            }}\r\n                                                            className={`flex items-center justify-between px-4 py-3.5 rounded-xl border transition-all ${\r\n                                                                active \r\n                                                                ? 'bg-white/10 text-white border-white/20' \r\n                                                                : 'bg-transparent text-gray-400 border-transparent hover:bg-white/5'\r\n                                                            }`}\r\n                                                        >\r\n                                                            <span className=\"text-sm font-medium\">{opt.label}</span>\r\n                                                            {active && <span className=\"text-[#FF6B00]\"></span>}\r\n                                                        </button>\r\n                                                    );\r\n                                                })}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"h-6\" /> \r\n                                </div>\r\n                            </m.div>\r\n                        </>\r\n                    )}\r\n                </AnimatePresence>,\r\n                document.body\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MobileSortMenu;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { X, Send, ExternalLink, Bot, Eraser, Sparkles, Wand2 } from 'lucide-react';\r\nimport { FaPaperPlane, FaMagic, FaExternalLinkAlt } from \"react-icons/fa\"; // Keep existing icons used in previous layout\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { addRefToUrl } from '../utils/linkUtils'; \r\n\r\n// Import Logo\r\nimport LogoImage from '../assets/logo.png';\r\n// Import local tools data\r\nimport toolsData from '../data/toolsData';\r\n\r\nconst quickReplies = [\r\n  { label: \" Image Tools\", action: \"image\" },\r\n  { label: \" Copywriting\", action: \"copywriting\" },\r\n  { label: \" Coding Help\", action: \"code\" },\r\n  { label: \" Free Tools\", action: \"free\" }\r\n];\r\n\r\nconst ChatBot = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [messages, setMessages] = useState([\r\n    { \r\n      id: 1, \r\n      text: \"Hi there!  I'm your AI Tools Assistant. I can help you find tools, compare options, or answer questions about pricing. What are you looking for today?\", \r\n      sender: 'bot' \r\n    }\r\n  ]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  \r\n  // Context Memory State\r\n  const [context, setContext] = useState({\r\n      lastIntent: null,     // 'search', 'chat', 'greeting', 'comparison', 'pricing'\r\n      lastTopic: null,      // 'image', 'code', etc.\r\n      lastResults: [],      // Stored results from search\r\n      shownCount: 0,        // How many results shown so far\r\n      userPreferences: {\r\n          budget: null, // 'free', 'paid'\r\n          role: null    // 'student', 'developer'\r\n      }\r\n  });\r\n\r\n  const messagesEndRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n  const chatRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n        if (isOpen && chatRef.current && !chatRef.current.contains(event.target)) {\r\n            setIsOpen(false);\r\n        }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  // Helper to flatten local tools data\r\n  const getInitialTools = () => {\r\n      // toolsData is array of { category: string, tools: [] }\r\n      // Adjust based on actual structure inspection: const toolsData = [ {id, name, tools: []} ... ]\r\n      if (Array.isArray(toolsData)) {\r\n          return toolsData.flatMap(category => category.tools || []);\r\n      }\r\n      return [];\r\n  };\r\n\r\n  // Initialize with flattened local data\r\n  const [allTools, setAllTools] = useState(getInitialTools());\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n    if (isOpen && inputRef.current) {\r\n      setTimeout(() => inputRef.current.focus(), 300);\r\n    }\r\n  }, [messages, isOpen]);\r\n\r\n  // Fetch live tools and merge\r\n  useEffect(() => {\r\n    const fetchTools = async () => {\r\n        try {\r\n            const apiModule = await import('../utils/api');\r\n            const api = apiModule.default;\r\n            \r\n            const response = await api.get('/api/tools/approved');\r\n            if (response.data && response.data.tools) {\r\n                const liveTools = response.data.tools;\r\n                const localTools = getInitialTools();\r\n\r\n                // Create a map of normalized tools to prevent duplicates\r\n                // Priority: Live tools overwrite local tools with same name\r\n                const toolsMap = new Map();\r\n\r\n                // Add local tools first\r\n                localTools.forEach(tool => {\r\n                    toolsMap.set(tool.name.toLowerCase(), { ...tool, source: 'local' });\r\n                });\r\n\r\n                // Add/Overwrite with live tools\r\n                liveTools.forEach(tool => {\r\n                    toolsMap.set(tool.name.toLowerCase(), {\r\n                        ...tool,\r\n                        image: tool.snapshotUrl || tool.image || LogoImage,\r\n                        isAiToolsChoice: tool.isAiToolsChoice,\r\n                        source: 'live'\r\n                    });\r\n                });\r\n\r\n                const mergedTools = Array.from(toolsMap.values());\r\n                setAllTools(mergedTools);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch live tools:\", error);\r\n            // Fallback is already set in initial state\r\n        }\r\n    };\r\n    fetchTools();\r\n  }, []);\r\n\r\n  // --- ADVANCED LOGIC ---\r\n\r\n  const updatePreferences = (text) => {\r\n      const lower = text.toLowerCase();\r\n      let updates = {};\r\n      if (lower.includes('student') || lower.includes('learn')) updates.role = 'student';\r\n      if (lower.includes('developer') || lower.includes('coder')) updates.role = 'developer';\r\n      if (lower.includes('free') || lower.includes('no cost')) updates.budget = 'free';\r\n      \r\n      if (Object.keys(updates).length > 0) {\r\n          setContext(prev => ({\r\n              ...prev,\r\n              userPreferences: { ...prev.userPreferences, ...updates }\r\n          }));\r\n      }\r\n  };\r\n\r\n  const detectIntent = (text) => {\r\n      const lower = text.toLowerCase();\r\n      if (lower.match(/compare|vs|better than/)) return 'comparison';\r\n      if (lower.match(/price|cost|free|paid|subscription/)) return 'pricing';\r\n      if (lower.match(/best|top|suggest|recommend|find|show/)) return 'discovery';\r\n      if (lower.match(/learn|course|study|student|education/)) return 'education';\r\n      if (lower.match(/how many|count|total|stats|number of tools/)) return 'stats';\r\n      if (lower.match(/^(hi|hello|hey|greetings)/)) return 'greeting';\r\n      if (lower.match(/more|next|continue/)) return 'continuation';\r\n      return 'unknown';\r\n  };\r\n\r\n  const handleStats = () => {\r\n      const count = allTools.length;\r\n      return { \r\n          text: `I currently have access to **${count}** amazing AI tools depending on my data source!  \\n\\nI can help you search through all of them. Try 'Find image tools'.` \r\n      };\r\n  };\r\n\r\n  const handleGreeting = () => {\r\n      setContext(prev => ({ ...prev, lastIntent: 'greeting', shownCount: 0 }));\r\n      return { text: \"Hello!  Ready to explore AI tools? You can skip the search and ask things like 'Best free coding tools' or 'Compare ChatGPT and Claude'.\" };\r\n  };\r\n\r\n  const handleComparison = (text) => {\r\n      const mentionedTools = allTools.filter(t => text.toLowerCase().includes(t.name.toLowerCase()));\r\n      if (mentionedTools.length >= 2) {\r\n          const [t1, t2] = mentionedTools.slice(0, 2);\r\n          setContext(prev => ({ ...prev, lastIntent: 'comparison', lastResults: mentionedTools }));\r\n          return {\r\n              text: `Here's a quick comparison:\\n\\n**${t1.name}**\\n ${t1.description}\\n Pricing: ${t1.pricing || 'Check site'}\\n\\n**${t2.name}**\\n ${t2.description}\\n Pricing: ${t2.pricing || 'Check site'}\\n\\nWhich one fits your needs better?`,\r\n              tools: [t1, t2]\r\n          };\r\n      }\r\n      return { text: \"I need two tool names to compare! Try 'Compare ChatGPT and Jasper'.\" };\r\n  };\r\n\r\n  const handlePricing = (text) => {\r\n      const mentionedTools = allTools.filter(t => text.toLowerCase().includes(t.name.toLowerCase()));\r\n      if (mentionedTools.length > 0) {\r\n          const tool = mentionedTools[0];\r\n          return { \r\n              text: `**${tool.name}** is listed as **${tool.pricing || 'Variable'}**. \\nAlways verify on their official site as pricing can change.`,\r\n              tools: [tool] \r\n          };\r\n      }\r\n      return { text: \"Most tools here are Freemium. Ask about a specific tool, e.g., 'Is Midjourney free?'\" };\r\n  };\r\n\r\n  const handleEducation = () => {\r\n      const eduTools = allTools.filter(t => \r\n          (t.category?.toLowerCase().includes('education') || t.description.toLowerCase().includes('learning')) &&\r\n          (t.pricing?.toLowerCase().includes('free') || t.pricing?.toLowerCase().includes('freemium'))\r\n      );\r\n      const topEdu = eduTools.sort((a, b) => (b.isAiToolsChoice ? 1 : 0) - (a.isAiToolsChoice ? 1 : 0)).slice(0, 4);\r\n      setContext(prev => ({ lastIntent: 'education', lastResults: eduTools, shownCount: 4 }));\r\n      return { text: \"Here are some great tools for learning & education :\", tools: topEdu };\r\n  };\r\n\r\n  const handleDiscovery = (text, currentContext, currentTools) => {\r\n      const lower = text.toLowerCase();\r\n      let categoryKeywords = [];\r\n      if (lower.includes('image') || lower.includes('art')) categoryKeywords.push('image', 'art');\r\n      if (lower.includes('code') || lower.includes('dev')) categoryKeywords.push('code', 'developer');\r\n      if (lower.includes('write') || lower.includes('copy')) categoryKeywords.push('writing', 'copy');\r\n      if (lower.includes('video')) categoryKeywords.push('video');\r\n\r\n      let results = currentTools.filter(t => {\r\n          const content = (t.name + t.description + (t.category || '')).toLowerCase();\r\n          return categoryKeywords.some(k => content.includes(k)) || categoryKeywords.length === 0;\r\n      });\r\n\r\n      // Simple keyword match if no categorical keywords\r\n      if (categoryKeywords.length === 0) {\r\n           const query = lower.replace('best', '').replace('tools', '').trim();\r\n           if (query) {\r\n             results = currentTools.filter(t => (t.name + t.description + (t.tags?.join('') || '')).toLowerCase().includes(query));\r\n           }\r\n      }\r\n\r\n      if (currentContext.userPreferences.budget === 'free') {\r\n          results = results.filter(t => t.pricing?.toLowerCase().includes('free'));\r\n      }\r\n\r\n      // Rank: AI Choice first\r\n      results.sort((a, b) => {\r\n           const aScore = (a.isAiToolsChoice ? 2 : 0) + (a.badge === 'Recommended' ? 1 : 0);\r\n           const bScore = (b.isAiToolsChoice ? 2 : 0) + (b.badge === 'Recommended' ? 1 : 0);\r\n           return bScore - aScore;\r\n      });\r\n\r\n      const top = results.slice(0, 4);\r\n      if (top.length > 0) {\r\n          setContext(prev => ({ ...prev, lastIntent: 'discovery', lastResults: results, shownCount: 4 }));\r\n          return { text: `Here are the top picks based on your request! `, tools: top };\r\n      }\r\n      return { text: \"I couldn't find exact matches. Try 'Best image tools' or 'Free coding assistants'.\" };\r\n  };\r\n\r\n  const handleContinuation = () => {\r\n      if (context.lastResults.length > context.shownCount) {\r\n           const nextBatch = context.lastResults.slice(context.shownCount, context.shownCount + 3);\r\n           setContext(prev => ({ ...prev, shownCount: prev.shownCount + 3 }));\r\n           return { text: `Here are ${nextBatch.length} more results:`, tools: nextBatch };\r\n      }\r\n      return { text: \"That's all I found! Ready for a new search?\" };\r\n  };\r\n\r\n  const handleUnknown = (text) => {\r\n      const lower = text.toLowerCase();\r\n      const matched = allTools.filter(t => (t.name + t.description).toLowerCase().includes(lower));\r\n      if (matched.length > 0) {\r\n          const top = matched.slice(0, 3);\r\n          setContext(prev => ({ lastIntent: 'search', lastResults: matched, shownCount: 3 }));\r\n          return { text: `I found these tools mentioning \"${text}\":`, tools: top };\r\n      }\r\n      return { text: \"I didn't quite get that. Try 'Find video tools' or 'Compare X and Y'.\" };\r\n  };\r\n\r\n  const getUpdatedPreferences = (text, currentPrefs) => {\r\n      const lower = text.toLowerCase();\r\n      let updates = {};\r\n      if (lower.includes('student') || lower.includes('learn')) updates.role = 'student';\r\n      if (lower.includes('developer') || lower.includes('coder')) updates.role = 'developer';\r\n      if (lower.includes('free') || lower.includes('no cost')) updates.budget = 'free';\r\n      \r\n      return { ...currentPrefs, ...updates };\r\n  };\r\n\r\n  const generateSmartResponse = (userInput) => {\r\n      // 1. Calculate new preferences immediately\r\n      const newPreferences = getUpdatedPreferences(userInput, context.userPreferences || { budget: null, role: null });\r\n      \r\n      // Update state if changed\r\n      if (JSON.stringify(newPreferences) !== JSON.stringify(context.userPreferences)) {\r\n          setContext(prev => ({\r\n              ...prev,\r\n              userPreferences: newPreferences\r\n          }));\r\n      }\r\n\r\n      // 2. Create a temporary context object allowed to satisfy the handlers immediately\r\n      const tempContext = { ...context, userPreferences: newPreferences };\r\n\r\n      const intent = detectIntent(userInput);\r\n      \r\n      switch (intent) {\r\n          case 'greeting': return handleGreeting();\r\n          case 'stats': return handleStats();\r\n          case 'comparison': return handleComparison(userInput);\r\n          case 'pricing': return handlePricing(userInput);\r\n          case 'education': return handleEducation();\r\n          case 'continuation': return handleContinuation();\r\n          case 'discovery': return handleDiscovery(userInput, tempContext, allTools);\r\n          default: return handleUnknown(userInput);\r\n      }\r\n  };\r\n \r\n  const handleSend = async (text = input) => {\r\n    if (!text.trim()) return;\r\n\r\n    const newUserMsg = { id: Date.now(), text: text, sender: 'user' };\r\n    setMessages(prev => [...prev, newUserMsg]);\r\n    setInput(\"\");\r\n    setIsTyping(true);\r\n\r\n    setTimeout(() => {\r\n      const botResponse = generateSmartResponse(text);\r\n      const newBotMsg = { \r\n        id: Date.now() + 1, \r\n        text: botResponse.text, \r\n        tools: botResponse.tools, \r\n        sender: 'bot' \r\n      };\r\n      setMessages(prev => [...prev, newBotMsg]);\r\n      setIsTyping(false);\r\n    }, 1000);\r\n  };\r\n\r\n  const clearChat = () => {\r\n    setMessages([{ \r\n      id: 1, \r\n      text: \"Chat cleared!  How can I help you today?\", \r\n      sender: 'bot' \r\n    }]);\r\n    setContext({ lastIntent: null, lastTopic: null, lastResults: [], shownCount: 0, userPreferences: { budget: null, role: null } });\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed bottom-6 right-6 z-50 flex flex-col items-end\">\r\n      {/* Floating Button */}\r\n      {!isOpen && (\r\n      <button\r\n        onClick={() => setIsOpen(true)}\r\n        className=\"w-16 h-16 rounded-full flex items-center justify-center text-white transition-all duration-300 hover:scale-110 active:scale-95 group relative\"\r\n          style={{\r\n          background: 'rgba(5, 5, 5, 0.6)',\r\n          backdropFilter: 'blur(12px)',\r\n          WebkitBackdropFilter: 'blur(12px)',\r\n          border: '1px solid rgba(255, 255, 255, 0.1)',\r\n          boxShadow: '0 8px 32px 0 rgba(255, 107, 0, 0.15)'\r\n        }}\r\n      >\r\n          <div className=\"relative\">\r\n            <img src={LogoImage} alt=\"Chat\" className=\"w-10 h-10 object-contain group-hover:scale-110 transition-transform\" />\r\n            <span className=\"absolute -top-1 -right-1 w-3 h-3 bg-[#FF6B00] rounded-full border-2 border-black shadow-lg shadow-orange-500/50 animate-pulse\" />\r\n          </div>\r\n      </button>\r\n      )}\r\n\r\n      {/* Chat Window */}\r\n      <AnimatePresence>\r\n      {isOpen && (\r\n        <motion.div\r\n            ref={chatRef}\r\n            initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n            className=\"fixed bottom-24 right-4 sm:right-6 z-[100] w-[90vw] sm:w-[380px] h-[600px] max-h-[80vh] rounded-3xl overflow-hidden flex flex-col font-sans border border-white/20 shadow-[0_8px_32px_0_rgba(0,0,0,0.36)]\"\r\n            style={{\r\n                background: 'rgba(5, 5, 5, 0.9)',\r\n                backdropFilter: 'blur(20px)',\r\n                WebkitBackdropFilter: 'blur(20px)',\r\n                boxShadow: '0 20px 50px -12px rgba(0, 0, 0, 0.8)'\r\n            }}\r\n        >\r\n          {/* Animated Background Blobs */}\r\n          <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0\">\r\n            <div className=\"absolute -top-20 -left-20 w-60 h-60 bg-[#FF6B00]/10 rounded-full blur-[80px] animate-pulse\" />\r\n            <div className=\"absolute -bottom-20 -right-20 w-60 h-60 bg-red-600/10 rounded-full blur-[80px] animate-pulse\" style={{ animationDelay: '1s' }} />\r\n          </div>\r\n\r\n          {/* Header */}\r\n          <div className=\"relative z-10 px-5 py-4 border-b border-white/10 bg-white/5 backdrop-blur-md flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"relative\">\r\n                <div className=\"w-10 h-10 rounded-full p-[1px] bg-gradient-to-tr from-[#FF6B00] to-red-600\">\r\n                    <div className=\"w-full h-full rounded-full bg-black/50 backdrop-blur-sm flex items-center justify-center overflow-hidden\">\r\n                         <img src={LogoImage} alt=\"AI\" className=\"w-full h-full object-cover opacity-90\" />\r\n                    </div>\r\n                </div>\r\n                <span className=\"absolute bottom-0 right-0 w-2.5 h-2.5 bg-[#FF6B00] rounded-full border-2 border-black shadow-[0_0_8px_rgba(255,107,0,0.5)] animate-pulse\" />\r\n              </div>\r\n              <div>\r\n                <h3 className=\"text-white font-bold text-base tracking-wide flex items-center gap-1.5 shadow-black drop-shadow-md\">\r\n                  AI Hub Assistant\r\n                  <Sparkles className=\"w-3.5 h-3.5 text-[#FF6B00] animate-pulse\" />\r\n                </h3>\r\n                <div className=\"flex items-center gap-1.5\">\r\n                  <span className=\"w-1.5 h-1.5 rounded-full bg-[#FF6B00] animate-pulse\" />\r\n                  <span className=\"text-[10px] text-orange-200/80 font-medium tracking-wider uppercase\">Online</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-1.5\">\r\n              <button\r\n                onClick={clearChat}\r\n                className=\"p-2 rounded-xl text-white/50 hover:text-white hover:bg-white/10 transition-all hover:rotate-12 active:scale-95 group\"\r\n                title=\"Clear Chat\"\r\n              >\r\n                <Eraser className=\"w-4 h-4 group-hover:text-pink-400 transition-colors\" />\r\n              </button>\r\n              <button\r\n                onClick={() => setIsOpen(false)}\r\n                className=\"p-2 rounded-xl text-white/50 hover:text-white hover:bg-white/10 transition-all hover:scale-110 active:scale-95 hover:rotate-90 duration-300\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n        {/* Messages Area - Flex Grow */}\r\n        <div \r\n            className=\"flex-1 min-h-0 overflow-y-auto p-4 space-y-6 scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent relative z-10\"\r\n        >\r\n            {messages.map((msg) => (\r\n                <motion.div\r\n                    key={msg.id}\r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    className={`flex flex-col ${msg.sender === 'user' ? 'items-end' : 'items-start'} gap-1`}\r\n                >\r\n                    {/* Message Bubble */}\r\n                    <div\r\n                        className={`max-w-[85%] p-3.5 rounded-2xl text-sm leading-relaxed shadow-lg backdrop-blur-md border border-white/10 ${\r\n                            msg.sender === 'user'\r\n                                ? 'bg-gradient-to-br from-[#FF6B00] to-orange-700 text-white rounded-br-none shadow-orange-900/20'\r\n                                : 'bg-white/10 text-gray-100 rounded-bl-none'\r\n                        }`}\r\n                    >\r\n                        <div className=\"whitespace-pre-wrap\">{msg.text}</div>\r\n                    </div>\r\n\r\n                    {/* Tool Suggestions (Card Style) */}\r\n                    {msg.tools && msg.tools.length > 0 && (\r\n                        <div className=\"mt-2 w-[90%] space-y-2\">\r\n                            {msg.tools.map((tool, idx) => (\r\n                                <motion.a \r\n                                    key={idx}\r\n                                    href={addRefToUrl(tool.url)}\r\n                                    target=\"_blank\" \r\n                                    rel=\"noopener noreferrer\"\r\n                                    initial={{ opacity: 0, x: -10 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    transition={{ delay: idx * 0.1 }}\r\n                                    className=\"flex items-center gap-3 p-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 hover:border-cyan-500/50 transition-all group cursor-pointer text-left backdrop-blur-sm shadow-sm\"\r\n                                >\r\n                                    <div className=\"w-10 h-10 rounded-lg bg-black/40 overflow-hidden flex-shrink-0 border border-white/5\">\r\n                                        <img src={tool.image || LogoImage} alt={tool.name} className=\"w-full h-full object-cover\" />\r\n                                    </div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <h4 className=\"text-white font-medium text-xs truncate group-hover:text-[#FF6B00] transition-colors\">{tool.name}</h4>\r\n                                        <p className=\"text-gray-400 text-[10px] truncate\">{tool.description}</p>\r\n                                    </div>\r\n                                    <FaExternalLinkAlt className=\"text-gray-500 text-xs group-hover:text-[#FF6B00]\" />\r\n                                </motion.a>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                    \r\n                    <span className=\"text-[9px] text-gray-400/70 px-1\">\r\n                        {msg.sender === 'user' ? 'You' : 'AI Assistant'}\r\n                    </span>\r\n                </motion.div>\r\n            ))}\r\n            \r\n            {isTyping && (\r\n                <div className=\"flex justify-start\">\r\n                    <div className=\"bg-white/5 p-4 rounded-2xl rounded-bl-sm flex gap-1.5 items-center backdrop-blur-sm border border-white/10\">\r\n                        <span className=\"w-1.5 h-1.5 bg-[#FF6B00] rounded-full animate-bounce\" style={{ animationDelay: '0s' }} />\r\n                        <span className=\"w-1.5 h-1.5 bg-[#FF6B00] rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }} />\r\n                        <span className=\"w-1.5 h-1.5 bg-[#FF6B00] rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }} />\r\n                    </div>\r\n                </div>\r\n            )}\r\n            <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        {/* Quick Replies & Input Wrapper - Flex Footer */}\r\n        <div className=\"flex-none bg-white/5 border-t border-white/10 backdrop-blur-md relative z-20\">\r\n            \r\n                {/* Quick Replies */}\r\n            {!isTyping && messages.length < 2 && (\r\n                <div className=\"px-4 pt-3 flex gap-2 flex-wrap justify-center\">\r\n                    {quickReplies.map((qr) => (\r\n                        <button\r\n                            key={qr.label}\r\n                            onClick={() => handleSend(qr.action)}\r\n                            className=\"text-xs bg-white/5 hover:bg-[#FF6B00]/20 border border-white/10 hover:border-[#FF6B00]/50 text-gray-300 hover:text-white px-3 py-1.5 rounded-full transition-all backdrop-blur-sm shadow-sm\"\r\n                        >\r\n                            {qr.label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Input Area */}\r\n            <div className=\"p-4\">\r\n                <div className=\"relative group\">\r\n                    <input\r\n                        ref={inputRef}\r\n                        type=\"text\"\r\n                        value={input}\r\n                        onChange={(e) => setInput(e.target.value)}\r\n                        onKeyPress={(e) => e.key === 'Enter' && handleSend()}\r\n                        placeholder=\"Type to find tools...\"\r\n                        className=\"w-full bg-black/40 text-white pl-4 pr-12 py-3.5 rounded-xl border border-white/10 focus:border-[#FF6B00]/50 focus:ring-2 focus:ring-[#FF6B00]/10 focus:outline-none transition-all placeholder:text-gray-500 text-sm shadow-inner backdrop-blur-sm\"\r\n                    />\r\n                    <button\r\n                        onClick={() => handleSend()}\r\n                        disabled={!input.trim()}\r\n                        className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-lg text-[#FF6B00] hover:bg-[#FF6B00]/10 disabled:text-gray-600 disabled:hover:bg-transparent transition-all\"\r\n                    >\r\n                        <FaPaperPlane className={`text-sm transform transition-transform ${input.trim() ? 'scale-110' : 'scale-100'}`} />\r\n                    </button>\r\n                </div>\r\n                <div className=\"mt-2 text-center\">\r\n                    <span className=\"text-[9px] text-gray-500 flex items-center justify-center gap-1.5\">\r\n                        <FaMagic className=\"text-xs text-[#FF6B00]\" /> AI Context Smart Search(Beta)\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        </motion.div>\r\n      )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBot;","import React, { useState, useRef, useEffect } from 'react';\r\n\r\nconst PricingDropdown = ({ activePricing, handlePricing }) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef(null);\r\n\r\n    const pricingOptions = [\r\n        { value: 'all', label: 'All Resources', icon: '', color: 'text-blue-500' },\r\n        { value: 'free', label: 'Free', icon: '', color: 'text-cyan-500' },\r\n        { value: 'freemium', label: 'Freemium', icon: '', color: 'text-yellow-500' },\r\n        { value: 'open-source', label: 'Open Source', icon: '', color: 'text-purple-500' },\r\n        { value: 'paid', label: 'Paid', icon: '', color: 'text-green-500' }\r\n    ];\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const getSelected = () => pricingOptions.find(opt => opt.value === activePricing) || pricingOptions[0];\r\n\r\n    return (\r\n        <div className=\"relative\" ref={dropdownRef}>\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"px-4 py-2 text-sm font-medium rounded-lg bg-white/10 backdrop-blur-md text-white border border-white/20 hover:bg-white/20 transition-all duration-200 flex items-center gap-2 w-full justify-between shadow-lg\"\r\n            >\r\n                <span className=\"flex items-center gap-2\">\r\n                    <span>{getSelected().icon}</span>\r\n                    <span>{getSelected().label}</span>\r\n                </span>\r\n                <span className={`transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}></span>\r\n            </button>\r\n\r\n            {isOpen && (\r\n                <div className=\"absolute top-full mt-2 left-0 bg-[#0F0F0F] backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 p-2 min-w-[240px] z-[9999] overflow-visible space-y-1\">\r\n                    {pricingOptions.map((option) => (\r\n                        <button\r\n                            key={option.value}\r\n                            onClick={() => {\r\n                                handlePricing(option.value);\r\n                                setIsOpen(false);\r\n                            }}\r\n                            className={`w-full px-4 py-3 text-left flex items-center gap-3 rounded-xl transition-all duration-200 group ${activePricing === option.value \r\n                                ? 'bg-white/20 text-white shadow-md' \r\n                                : 'text-gray-400 hover:bg-white/10 hover:text-white'\r\n                            }`}\r\n                        >\r\n                            <span className=\"text-lg opacity-80 group-hover:opacity-100 transition-opacity\">{option.icon}</span>\r\n                            <span className=\"text-sm font-semibold whitespace-nowrap flex-1\">\r\n                                {option.label}\r\n                            </span>\r\n                            {activePricing === option.value && (\r\n                                <span className=\"text-xs text-white opacity-80\"></span>\r\n                            )}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PricingDropdown;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\n\r\nconst UnifiedSortDropdown = ({ \r\n    dateFilter, handleDateFilter, \r\n    sortOrder, handleSortOrder, \r\n    nameFilter, handleNameFilter \r\n}) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [expandedSection, setExpandedSection] = useState('date'); // 'date' | 'name' | null\r\n    const [showCustomDate, setShowCustomDate] = useState(false);\r\n    const [showLetterSelector, setShowLetterSelector] = useState(false);\r\n    const dropdownRef = useRef(null);\r\n\r\n    // Options Arrays\r\n    const dateOptions = [\r\n        { value: 'all', label: 'All Time' },\r\n        { value: 'today', label: 'Today' },\r\n        { value: 'month', label: 'This Month' },\r\n        { value: 'custom', label: 'Choose Date...' }\r\n    ];\r\n    const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n                setIsOpen(false);\r\n                setShowCustomDate(false);\r\n                setShowLetterSelector(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const toggleLetter = (letter) => {\r\n        const current = [...nameFilter];\r\n        const idx = current.indexOf(letter);\r\n        if (idx >= 0) current.splice(idx, 1);\r\n        else current.push(letter);\r\n        handleNameFilter(current);\r\n        // If filtering by letters, force name sort if not already\r\n        if (!['name_asc', 'name_desc'].includes(sortOrder)) {\r\n            handleSortOrder('name_asc');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative\" ref={dropdownRef}>\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"px-4 py-2 text-sm font-medium rounded-lg bg-white/10 backdrop-blur-md text-white border border-white/20 hover:bg-white/20 transition-all duration-200 flex items-center gap-2 w-full justify-between shadow-lg\"\r\n            >\r\n                <span className=\"truncate\">Sort By</span>\r\n                <span className={`transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}></span>\r\n            </button>\r\n\r\n            {isOpen && (\r\n                <div className=\"absolute top-full mt-2 right-0 bg-[#0F0F0F] backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 p-2 min-w-[240px] z-[9999] overflow-visible flex flex-col gap-1\">\r\n                    \r\n                    {/* Date Added Section */}\r\n                    <div className=\"rounded-xl overflow-hidden bg-white/5 border border-white/5\">\r\n                        <button \r\n                            onClick={() => setExpandedSection(expandedSection === 'date' ? null : 'date')}\r\n                            className=\"w-full px-4 py-3 flex items-center justify-between text-sm font-bold text-gray-200 hover:bg-white/5 transition-colors\"\r\n                        >\r\n                            <span>Date Added</span>\r\n                            <span className={`transition-transform ${expandedSection === 'date' ? 'rotate-180' : ''}`}></span>\r\n                        </button>\r\n                        \r\n                        {expandedSection === 'date' && (\r\n                            <div className=\"p-2 space-y-1 bg-black/20 border-t border-white/5\">\r\n                                {!showCustomDate ? (\r\n                                    dateOptions.map((option) => (\r\n                                        <button\r\n                                            key={option.value}\r\n                                            onClick={() => {\r\n                                                if (option.value === 'custom') {\r\n                                                    setShowCustomDate(true);\r\n                                                } else {\r\n                                                    handleDateFilter({ type: option.value, value: null });\r\n                                                    handleSortOrder('date'); // Switch sort to date\r\n                                                }\r\n                                            }}\r\n                                            className={`w-full px-3 py-2 text-left rounded-lg text-xs font-medium transition-colors flex items-center justify-between ${\r\n                                                dateFilter.type === option.value && sortOrder === 'date' ? 'bg-[#FF6B00] text-white' : 'text-gray-400 hover:text-white hover:bg-white/10'\r\n                                            }`}\r\n                                        >\r\n                                            {option.label}\r\n                                            {dateFilter.type === option.value && sortOrder === 'date' && option.value !== 'custom' && <span></span>}\r\n                                        </button>\r\n                                    ))\r\n                                ) : (\r\n                                    <div className=\"space-y-2 p-1\">\r\n                                         <div className=\"flex items-center justify-between text-xs text-gray-400\">\r\n                                            <span>Pick Date</span>\r\n                                            <button onClick={() => setShowCustomDate(false)} className=\"hover:text-white text-[10px] uppercase\">Back</button>\r\n                                         </div>\r\n                                         <input \r\n                                            type=\"date\" \r\n                                            className=\"w-full bg-white/10 border border-white/10 rounded px-2 py-1 text-white text-xs\"\r\n                                            onChange={(e) => {\r\n                                                if (e.target.value) {\r\n                                                    handleDateFilter({ type: 'custom', value: e.target.value });\r\n                                                    handleSortOrder('date');\r\n                                                }\r\n                                            }}\r\n                                         />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Name Section */}\r\n                    <div className=\"rounded-xl overflow-hidden bg-white/5 border border-white/5\">\r\n                         <button \r\n                            onClick={() => setExpandedSection(expandedSection === 'name' ? null : 'name')}\r\n                            className=\"w-full px-4 py-3 flex items-center justify-between text-sm font-bold text-gray-200 hover:bg-white/5 transition-colors\"\r\n                        >\r\n                            <span>Name</span>\r\n                            <span className={`transition-transform ${expandedSection === 'name' ? 'rotate-180' : ''}`}></span>\r\n                        </button>\r\n                        \r\n                        {expandedSection === 'name' && (\r\n                            <div className=\"p-2 space-y-1 bg-black/20 border-t border-white/5\">\r\n                                {!showLetterSelector ? (\r\n                                    <>\r\n                                        <button\r\n                                            onClick={() => { handleSortOrder('name_asc'); handleNameFilter([]); }}\r\n                                            className={`w-full px-3 py-2 text-left rounded-lg text-xs font-medium transition-colors flex items-center justify-between ${\r\n                                                sortOrder === 'name_asc' && nameFilter.length === 0 ? 'bg-[#FF6B00] text-white' : 'text-gray-400 hover:text-white hover:bg-white/10'\r\n                                            }`}\r\n                                        >\r\n                                            A - Z\r\n                                            {sortOrder === 'name_asc' && nameFilter.length === 0 && <span></span>}\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => { handleSortOrder('name_desc'); handleNameFilter([]); }}\r\n                                            className={`w-full px-3 py-2 text-left rounded-lg text-xs font-medium transition-colors flex items-center justify-between ${\r\n                                                sortOrder === 'name_desc' && nameFilter.length === 0 ? 'bg-[#FF6B00] text-white' : 'text-gray-400 hover:text-white hover:bg-white/10'\r\n                                            }`}\r\n                                        >\r\n                                            Z - A\r\n                                            {sortOrder === 'name_desc' && nameFilter.length === 0 && <span></span>}\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => setShowLetterSelector(true)}\r\n                                            className={`w-full px-3 py-2 text-left rounded-lg text-xs font-medium transition-colors flex items-center justify-between ${\r\n                                                nameFilter.length > 0 ? 'bg-[#FF6B00] text-white' : 'text-gray-400 hover:text-white hover:bg-white/10'\r\n                                            }`}\r\n                                        >\r\n                                            Customize...\r\n                                            <span></span>\r\n                                        </button>\r\n                                    </>\r\n                                ) : (\r\n                                    <div className=\"space-y-2 p-1\">\r\n                                        <div className=\"flex items-center justify-between text-xs text-gray-400\">\r\n                                            <span>Start Letter</span>\r\n                                            <button onClick={() => setShowLetterSelector(false)} className=\"hover:text-white text-[10px] uppercase\">Back</button>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-5 gap-1 max-h-[160px] overflow-y-auto scrollbar-hide py-1\">\r\n                                            {alphabet.map(letter => (\r\n                                                <button\r\n                                                    key={letter}\r\n                                                    onClick={() => toggleLetter(letter)}\r\n                                                    className={`aspect-square rounded flex items-center justify-center text-[10px] font-bold ${\r\n                                                        nameFilter.includes(letter) ? 'bg-orange-500 text-white' : 'bg-white/10 text-gray-400 hover:bg-white/20'\r\n                                                    }`}\r\n                                                >\r\n                                                    {letter}\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                        <button onClick={() => handleNameFilter([])} className=\"w-full text-[10px] text-center text-gray-500 hover:text-white\">Clear Selection</button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UnifiedSortDropdown;\r\n","import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport { useLanguage } from '../context/LanguageContext';\r\nimport { LazyMotion, domAnimation, m } from 'framer-motion';\r\nimport FuseNamespace from 'fuse.js';\r\nimport { Player } from '@lottiefiles/react-lottie-player';\r\nimport ToolOfTheDay from './ToolOfTheDay';\r\n\r\nimport toolsData from '../data/toolsData';\r\nimport ToolCard from './ToolCard';\r\nimport ToolDetailModal from './ToolDetailModal';\r\nimport { FaSearch, FaChevronLeft, FaChevronRight } from 'react-icons/fa';\r\nimport MobileCategoryTabs from './MobileCategoryTabs';\r\nimport MobileTopNav from './MobileTopNav';\r\nimport MobileSortMenu from './MobileSortMenu';\r\nimport HeroHeading from './HeroHeading';\r\nimport InfiniteMarquee from './InfiniteMarquee';\r\nimport ChatBot from './ChatBot';\r\n\r\nimport ProCarousel from './ProCarousel';\r\nimport PricingDropdown from './PricingDropdown';\r\nimport UnifiedSortDropdown from './UnifiedSortDropdown';\r\n\r\n\r\n\r\n\r\n// Derived category IDs (fallback if utility not present)\r\nconst CATEGORY_IDS = toolsData.map(c => c.id);\r\n\r\n\r\n\r\n// --- Main Home Component ---\r\nconst Home = () => {\r\n    // nav-related state moved to a global Sidebar component\r\n    const { t } = useLanguage();\r\n\r\n    // Show more categories state\r\n\r\n\r\n    const [showAllCategories, setShowAllCategories] = useState(false);\r\n    const [showAllStickyCategories, setShowAllStickyCategories] = useState(false);\r\n\r\n\r\n\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    // --- Infinite Marquee Featured Tools ---\r\n    const featuredTools = useMemo(() => {\r\n        // Find tools tagged as 'Recommended' or 'New' or 'Choice' to showcase\r\n        // Prioritize tools with images\r\n        const all = toolsData.flatMap(c => c.tools);\r\n        // Shuffle or pick specific ones. For now, let's pick 15 specific high-quality ones to ensure logos look good\r\n        const topPicks = all.filter(t => \r\n             (t.badge === 'Recommended' || t.name === 'ChatGPT' || t.name === 'Midjourney' || t.name === 'Claude' || t.name === 'Jasper' || t.name === 'Notion AI') \r\n             && t.image // Ensure they have logos\r\n        );\r\n        // Dedupe by name\r\n        return Array.from(new Map(topPicks.map(item => [item.name, item])).values()).slice(0, 15);\r\n    }, []);\r\n    // Modal state for detailed tool view\r\n    const [selectedTool, setSelectedTool] = useState(null);\r\n\r\n    const openModal = useCallback((tool) => {\r\n        if (!tool) {\r\n            console.error('Tool data is missing!');\r\n            return;\r\n        }\r\n        setSelectedTool(tool);\r\n    }, []);\r\n\r\n    const closeModal = useCallback(() => {\r\n        setSelectedTool(null);\r\n    }, []);\r\n\r\n    // Consistent navigation for both grid and list views\r\n    const navigateToTool = useCallback((tool) => {\r\n        if (!tool || !tool.name) return;\r\n        if (tool.comingSoon) return;\r\n        const toolSlug = tool.name.toLowerCase()\r\n            .replace(/[^a-z0-9\\s-]/g, '')\r\n            .replace(/\\s+/g, '-')\r\n            .replace(/-+/g, '-');\r\n        const categorySlug = tool.category || 'all';\r\n        history.push(`/tools/${categorySlug}/${toolSlug}`);\r\n    }, [history]);\r\n\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [suggestions, setSuggestions] = useState([]);\r\n    const [isSearchFocused, setIsSearchFocused] = useState(false);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [activeFilter, setActiveFilter] = useState('all');\r\n    const [activePricing, setActivePricing] = useState('all');\r\n    const [dateFilter, setDateFilter] = useState({ type: 'all', value: null });\r\n    const [sortOrder, setSortOrder] = useState('date'); // 'date' | 'name_asc' | 'name_desc'\r\n    const [nameFilter, setNameFilter] = useState([]); // array of 'A', 'B' etc.\r\n    // Pagination & progressive loading\r\n    const PAGE_SIZE = 30;\r\n    const [showMoreMenu, setShowMoreMenu] = useState(false);\r\n    const [page, setPage] = useState(() => {\r\n        if (typeof window === 'undefined') return 1;\r\n        const params = new URLSearchParams(window.location.search || '');\r\n        const p = parseInt(params.get('page'), 10);\r\n        return (p && !isNaN(p) && p > 0) ? p : 1;\r\n    }); // desktop pagination current page\r\n    const [mobileVisibleCount, setMobileVisibleCount] = useState(PAGE_SIZE); // mobile progressive load\r\n    const debounceRef = useRef(null);\r\n    const [activeSuggestionIndex, setActiveSuggestionIndex] = useState(-1);\r\n    const [isMobile, setIsMobile] = useState(() => typeof window !== 'undefined' ? window.innerWidth < 768 : false);\r\n    const [mobileSheetOpen, setMobileSheetOpen] = useState(false);\r\n    const [showScrollTop, setShowScrollTop] = useState(false);\r\n    const [isInitialLoading, setIsInitialLoading] = useState(false);\r\n    const [showStickyNav, setShowStickyNav] = useState(false);\r\n    const stickyNavRef = useRef(null);\r\n    const [stickyHeight, setStickyHeight] = useState(0);\r\n    const [sidebarOpen, setSidebarOpen] = useState(() => localStorage.getItem('sidebarOpen') === 'true');\r\n    // Grid/List view mode for tools\r\n    const [viewMode, setViewMode] = useState('grid'); // 'grid' | 'list'\r\n    // Reference to the hero/search section (non-sticky mobile nav will sit below it)\r\n    const searchSectionRef = useRef(null);\r\n    // Intersection trigger for Browse by Category heading\r\n    const categoryHeadingRef = useRef(null);\r\n    // Refs to detect outside-click for category chip groups (sticky and main)\r\n    const stickyCatsRef = useRef(null);\r\n    const mainCatsRef = useRef(null);\r\n\r\n    // Scroll to top button visibility\r\n    useEffect(() => {\r\n        let ticking = false;\r\n\r\n        const handleScroll = () => {\r\n            if (!ticking) {\r\n                window.requestAnimationFrame(() => {\r\n                    setShowScrollTop(window.scrollY > 500);\r\n\r\n                    ticking = false;\r\n                });\r\n                ticking = true;\r\n            }\r\n        };\r\n\r\n        window.addEventListener('scroll', handleScroll, { passive: true });\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    }, []);\r\n\r\n    // Show sticky nav after you scroll past the \"Browse by Category\" heading; hide when you scroll back above it\r\n    useEffect(() => {\r\n        const target = categoryHeadingRef.current;\r\n        if (!target) return;\r\n        const observer = new IntersectionObserver(\r\n            ([entry]) => {\r\n                // If the heading is not intersecting and has moved past the top (negative top),\r\n                // we are scrolled below it  show sticky nav. Otherwise hide.\r\n                const shouldShow = !entry.isIntersecting && entry.boundingClientRect.top <= 0;\r\n                setShowStickyNav(shouldShow);\r\n                // Recalculate spacer height when toggling\r\n                if (shouldShow && stickyNavRef.current) {\r\n                    setStickyHeight(stickyNavRef.current.offsetHeight || 0);\r\n                } else {\r\n                    setStickyHeight(0);\r\n                }\r\n            },\r\n            {\r\n                threshold: 0,\r\n                rootMargin: '0px 0px 0px 0px'\r\n            }\r\n        );\r\n        observer.observe(target);\r\n        return () => observer.disconnect();\r\n    }, []);\r\n\r\n    // Lock body scroll when the mobile categories sheet is open\r\n    useEffect(() => {\r\n        if (!isMobile) return;\r\n        const prev = document.body.style.overflow;\r\n        if (mobileSheetOpen) {\r\n            document.body.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = prev || '';\r\n        }\r\n        return () => { document.body.style.overflow = prev || ''; };\r\n    }, [mobileSheetOpen, isMobile]);\r\n\r\n    // Collapse expanded category lists when clicking outside of category chip groups\r\n    useEffect(() => {\r\n        const onDocClick = (e) => {\r\n            const target = e.target;\r\n            const inSticky = stickyCatsRef.current && stickyCatsRef.current.contains(target);\r\n            const inMain = mainCatsRef.current && mainCatsRef.current.contains(target);\r\n            if (!inSticky && !inMain) {\r\n                if (showAllStickyCategories) setShowAllStickyCategories(false);\r\n                if (showAllCategories) setShowAllCategories(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', onDocClick);\r\n        return () => document.removeEventListener('mousedown', onDocClick);\r\n    }, [showAllStickyCategories, showAllCategories]);\r\n\r\n    // Horizontal scroll for sticky navbar categories (non-passive to prevent default page scroll)\r\n    useEffect(() => {\r\n        const el = stickyCatsRef.current;\r\n        if (!el) return;\r\n\r\n        let targetScroll = el.scrollLeft;\r\n        let isAnimating = false;\r\n        let animationFrameId;\r\n\r\n        const ease = 0.1; // Smoothness factor (lower is smoother/slower)\r\n\r\n        const animateScroll = () => {\r\n            if (!el) return;\r\n\r\n            // Linear interpolation\r\n            const diff = targetScroll - el.scrollLeft;\r\n\r\n            if (Math.abs(diff) < 0.5) {\r\n                el.scrollLeft = targetScroll;\r\n                isAnimating = false;\r\n                return;\r\n            }\r\n\r\n            el.scrollLeft += diff * ease;\r\n            animationFrameId = requestAnimationFrame(animateScroll);\r\n        };\r\n\r\n        const onWheel = (e) => {\r\n            if (e.deltaY !== 0) {\r\n                e.preventDefault();\r\n\r\n                // Update target scroll position\r\n                const maxScroll = el.scrollWidth - el.clientWidth;\r\n                targetScroll = Math.max(0, Math.min(maxScroll, targetScroll + e.deltaY));\r\n\r\n                if (!isAnimating) {\r\n                    isAnimating = true;\r\n                    // Sync target with current if we were stopped (prevents jumps if user scrolls after animation stopped)\r\n                    // But here we want to accumulate, so we just start the loop.\r\n                    // However, if we were stopped, targetScroll might be stale? \r\n                    // No, we just updated it based on current targetScroll. \r\n                    // Wait, if animation stopped, targetScroll == scrollLeft. \r\n                    // So we are good.\r\n                    // Actually, better to re-sync targetScroll to current scrollLeft + delta if we were idle?\r\n                    // No, because we want to maintain momentum if they scroll fast.\r\n                    // But if they stopped scrolling for a while, targetScroll is already at scrollLeft.\r\n                    // So it's fine.\r\n\r\n                    // One edge case: if external scroll happened (e.g. drag), targetScroll might be wrong.\r\n                    // So we should sync targetScroll on scroll event?\r\n                    // But we are overriding wheel. Drag is handled by browser native or other handlers.\r\n                    // Let's just sync targetScroll to el.scrollLeft + deltaY if not animating?\r\n                    // If not animating, targetScroll IS el.scrollLeft (approximately).\r\n                    // So let's just ensure we start from current position if we are starting fresh.\r\n                    if (Math.abs(targetScroll - el.scrollLeft) > 100) {\r\n                        // If we drifted too far (e.g. manual drag), reset target\r\n                        targetScroll = el.scrollLeft + e.deltaY;\r\n                    }\r\n\r\n                    animateScroll();\r\n                }\r\n            }\r\n        };\r\n\r\n        // We also need to update targetScroll if the user scrolls manually (e.g. touch/drag)\r\n        // so that the next wheel event doesn't jump back.\r\n        const onScroll = () => {\r\n            if (!isAnimating) {\r\n                targetScroll = el.scrollLeft;\r\n            }\r\n        };\r\n\r\n        el.addEventListener('wheel', onWheel, { passive: false });\r\n        el.addEventListener('scroll', onScroll);\r\n\r\n        return () => {\r\n            el.removeEventListener('wheel', onWheel);\r\n            el.removeEventListener('scroll', onScroll);\r\n            cancelAnimationFrame(animationFrameId);\r\n        };\r\n    }, [showStickyNav]);\r\n\r\n    // Fallback scroll listener in case IntersectionObserver doesn't trigger (some edge browsers / dynamic layout changes)\r\n    useEffect(() => {\r\n        let ticking = false;\r\n        const handleScrollFallback = () => {\r\n            if (!categoryHeadingRef.current) return;\r\n            if (!ticking) {\r\n                window.requestAnimationFrame(() => {\r\n                    const rect = categoryHeadingRef.current.getBoundingClientRect();\r\n                    const shouldShow = rect.top <= 0; // show only when heading reaches/above top edge\r\n                    setShowStickyNav(prev => {\r\n                        if (prev !== shouldShow) {\r\n                            if (shouldShow && stickyNavRef.current) {\r\n                                setStickyHeight(stickyNavRef.current.offsetHeight || 0);\r\n                            } else if (!shouldShow) {\r\n                                setStickyHeight(0);\r\n                            }\r\n                        }\r\n                        return shouldShow;\r\n                    });\r\n                    ticking = false;\r\n                });\r\n                ticking = true;\r\n            }\r\n        };\r\n        // Initial check on mount\r\n        handleScrollFallback();\r\n        window.addEventListener('scroll', handleScrollFallback, { passive: true });\r\n        return () => window.removeEventListener('scroll', handleScrollFallback);\r\n    }, []);\r\n\r\n    // Removed sticky mini nav observer; navbar will be static in the flow\r\n\r\n    // Listen to sidebar open state broadcast so sticky nav can align beneath it and not obscure logo.\r\n    useEffect(() => {\r\n        const handler = (e) => {\r\n            if (e && e.detail && typeof e.detail.open === 'boolean') {\r\n                setSidebarOpen(e.detail.open);\r\n            }\r\n        };\r\n        window.addEventListener('sidebar-state', handler);\r\n        return () => window.removeEventListener('sidebar-state', handler);\r\n    }, []);\r\n\r\n    // Scroll to top function\r\n    const scrollToTop = () => {\r\n        window.scrollTo({\r\n            top: 0,\r\n            behavior: 'smooth'\r\n        });\r\n    };\r\n\r\n    // Mobile and Desktop placeholder texts with fade effect\r\n    // Simplified for i18n\r\n    const mobilePlaceholderTexts = [ t('search_placeholder_mobile') ];\r\n    const desktopPlaceholderTexts = [ t('search_placeholder_desktop') ];\r\n\r\n    const [currentPlaceholderIndex, setCurrentPlaceholderIndex] = useState(0);\r\n    const [placeholderFade, setPlaceholderFade] = useState(true);\r\n    const [isPlaceholderPaused, setIsPlaceholderPaused] = useState(false);\r\n\r\n    // Determine which placeholders to use based on screen size\r\n    const activePlaceholders = isMobile ? mobilePlaceholderTexts : desktopPlaceholderTexts;\r\n    const currentPlaceholderText = activePlaceholders[currentPlaceholderIndex];\r\n\r\n    // Pause rotation when searching or input is focused\r\n    useEffect(() => {\r\n        setIsPlaceholderPaused(isSearchFocused || searchQuery.length > 0);\r\n    }, [isSearchFocused, searchQuery]);\r\n\r\n    // Rotate placeholder with fade effect - 4 seconds for both mobile and desktop\r\n    useEffect(() => {\r\n        if (isPlaceholderPaused) return; // Don't rotate if paused\r\n\r\n        const fadeOutDuration = 300; // ms\r\n        const displayDuration = 4000; // 4 seconds for both mobile and desktop\r\n        const cycleDuration = displayDuration + fadeOutDuration;\r\n\r\n        const timer = setInterval(() => {\r\n            // Fade out\r\n            setPlaceholderFade(false);\r\n\r\n            // Change text after fade out\r\n            setTimeout(() => {\r\n                setCurrentPlaceholderIndex((prev) => (prev + 1) % activePlaceholders.length);\r\n                // Fade in\r\n                setPlaceholderFade(true);\r\n            }, fadeOutDuration);\r\n        }, cycleDuration);\r\n\r\n        return () => clearInterval(timer);\r\n    }, [isMobile, isPlaceholderPaused, activePlaceholders.length]);\r\n\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            setIsMobile(window.innerWidth < 768);\r\n        };\r\n\r\n        handleResize();\r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n\r\n    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\r\n    const rawUsername = localStorage.getItem('username');\r\n    const username = rawUsername && rawUsername.trim() !== '' ? rawUsername : null;\r\n\r\n    const getGreeting = () => {\r\n        const hour = new Date().getHours();\r\n        if (hour < 12) return 'Good morning';\r\n        if (hour < 18) return 'Good afternoon';\r\n        return 'Good evening';\r\n    };\r\n    // Fetch approved tools from backend - NON-BLOCKING with Stale-While-Revalidate Cache\r\n    const [approvedTools, setApprovedTools] = useState(() => {\r\n        try {\r\n            const cached = typeof localStorage !== 'undefined' ? localStorage.getItem('cached_tools_data') : null;\r\n            return cached ? JSON.parse(cached) : [];\r\n        } catch {\r\n            return [];\r\n        }\r\n    });\r\n    const [isLoading, setIsLoading] = useState(() => {\r\n        try {\r\n            return !localStorage.getItem('cached_tools_data');\r\n        } catch {\r\n            return true;\r\n        }\r\n    });\r\n\r\n    // Robust API base: env var, else auto-detect for Vercel hosts, else localhost\r\n    const API_URL = useMemo(() => {\r\n        const envUrl = process.env.REACT_APP_API_URL && process.env.REACT_APP_API_URL.trim();\r\n        if (envUrl) return envUrl;\r\n        try {\r\n            const host = typeof window !== 'undefined' ? window.location.hostname : '';\r\n            const isVercel = /vercel\\.app$/.test(host);\r\n            if (isVercel) return 'https://ai-tools-hub-backend-u2v6.onrender.com';\r\n        } catch { }\r\n        return 'http://localhost:5000';\r\n    }, []);\r\n\r\n    // Memoize slug function\r\n    const toSlug = useCallback((val) => {\r\n        try {\r\n            return String(val || '')\r\n                .trim()\r\n                .toLowerCase()\r\n                .replace(/[^a-z0-9\\s-]/g, '')\r\n                .replace(/\\s+/g, '-')\r\n                .replace(/-+/g, '-');\r\n        } catch {\r\n            return '';\r\n        }\r\n    }, []);\r\n\r\n    // Helper: build a favicon URL fallback when a tool has no snapshot image\r\n    const getFaviconUrl = useCallback((url) => {\r\n        try {\r\n            if (!url) return null;\r\n            const { hostname } = new URL(url);\r\n            return `https://www.google.com/s2/favicons?domain=${hostname}&sz=128`;\r\n        } catch {\r\n            return null;\r\n        }\r\n    }, []);\r\n\r\n    // Helper: choose best image source for any tool (snapshot -> provided image -> favicon)\r\n    const getImageSrc = useCallback((tool) => {\r\n        if (!tool) return null;\r\n        if (tool.image) return tool.image;\r\n        if (tool.url) return getFaviconUrl(tool.url);\r\n        return null;\r\n    }, [getFaviconUrl]);\r\n\r\n    useEffect(() => {\r\n        // Fetch in background without blocking UI\r\n        const fetchApprovedTools = async () => {\r\n            const tick = Math.floor(Date.now() / 60000); // bust cache every minute\r\n            const base = `${API_URL}/api/tools/approved`;\r\n            const url = `${base}?t=${tick}`;\r\n            try {\r\n                let res = await fetch(url, {\r\n                    cache: 'no-store',\r\n                    headers: { 'Cache-Control': 'no-cache' }\r\n                });\r\n                let json = await res.json();\r\n                if (!(res.ok && json.tools && Array.isArray(json.tools))) {\r\n                    // Fallback: try once more with a hard-bust timestamp\r\n                    const url2 = `${base}?t=${Date.now()}`;\r\n                    res = await fetch(url2, { cache: 'no-store', headers: { 'Cache-Control': 'no-cache' } });\r\n                    json = await res.json();\r\n                }\r\n                if (res.ok && json.tools && Array.isArray(json.tools)) {\r\n                    const validTools = json.tools.filter(tool => tool && tool.name);\r\n                    setApprovedTools(validTools);\r\n                    // Update cache\r\n                    localStorage.setItem('cached_tools_data', JSON.stringify(validTools));\r\n                } else {\r\n                    // If fetch fails but we have cache, keep cache (don't wipe it)\r\n                    if (approvedTools.length === 0) setApprovedTools([]);\r\n                }\r\n            } catch (err) {\r\n                console.error('Failed to fetch approved tools:', err);\r\n                // Keep cache if exists\r\n                if (approvedTools.length === 0) setApprovedTools([]);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n        // Fetch immediately without delay\r\n        fetchApprovedTools();\r\n    }, [API_URL]);\r\n\r\n    // Helper for \"isNew\" logic (7 days)\r\n    const ONE_WEEK_MS = 7 * 24 * 60 * 60 * 1000;\r\n    const isRecent = useCallback((date) => {\r\n        if (!date) return false;\r\n        return (Date.now() - date) < ONE_WEEK_MS;\r\n    }, []);\r\n\r\n    // Convert approved tools from database to display format with NEW badge\r\n    const convertedApprovedTools = useMemo(() => {\r\n        // console.log(' Converting approved tools, count:', approvedTools.length);\r\n\r\n        const buildSnapshotUrl = (snap) => {\r\n            if (!snap) return null;\r\n            try {\r\n                if (/^https?:\\/\\//i.test(snap)) return snap;\r\n                const withLeading = snap.startsWith('/') ? snap : `/${snap}`;\r\n                return `${API_URL}${withLeading}`;\r\n            } catch {\r\n                return null;\r\n            }\r\n        };\r\n\r\n        const converted = approvedTools\r\n            .filter(tool => tool && tool.name)\r\n            .map((tool) => {\r\n                const snapshot = buildSnapshotUrl(tool.snapshotUrl);\r\n                const fallback = !snapshot ? getFaviconUrl(tool.url) : null;\r\n                const rawCategory = tool.category || 'utility-tools';\r\n                const normalizedCategory = toSlug(rawCategory) || 'utility-tools';\r\n                const parsed = Date.parse(tool.createdAt || tool.updatedAt || '');\r\n                const safeTime = isNaN(parsed) ? Date.now() : parsed;\r\n\r\n                return {\r\n                    _id: tool._id,\r\n                    name: tool.name,\r\n                    shortDescription: tool.shortDescription || '',\r\n                    description: tool.description || '',\r\n                    link: tool.url || '#',\r\n                    url: tool.url || '#',\r\n                    image: snapshot || fallback || null,\r\n                    isNew: isRecent(safeTime),\r\n                    category: normalizedCategory,\r\n                    dateAdded: safeTime,\r\n\r\n                    pricing: tool.pricing || 'Freemium',\r\n                    isAiToolsChoice: tool.isAiToolsChoice || false,\r\n                };\r\n            });\r\n        return converted;\r\n    }, [approvedTools, API_URL, getFaviconUrl, toSlug, isRecent]);\r\n\r\n    const mergedToolsData = useMemo(() => {\r\n        // Process static tools to update isNew based on dateAdded\r\n        const staticCategoriesMap = new Map(\r\n            toolsData.map(cat => ({\r\n                ...cat,\r\n                tools: cat.tools.map(t => ({\r\n                    ...t,\r\n                    isNew: isRecent(t.dateAdded || 0) // Override static isNew\r\n                }))\r\n            })).map(cat => [cat.id, cat])\r\n        );\r\n        const newCategoriesMap = new Map();\r\n\r\n        convertedApprovedTools.forEach(tool => {\r\n            if (staticCategoriesMap.has(tool.category)) {\r\n                staticCategoriesMap.get(tool.category).tools.push(tool);\r\n            } else {\r\n                if (!newCategoriesMap.has(tool.category)) {\r\n                    const displayName = tool.category.replace(/-/g, ' ').replace(/\\b\\w/g, c => c.toUpperCase());\r\n                    newCategoriesMap.set(tool.category, {\r\n                        id: tool.category,\r\n                        name: displayName,\r\n                        description: `Tools for ${displayName}`,\r\n                        tools: []\r\n                    });\r\n                }\r\n                newCategoriesMap.get(tool.category).tools.push(tool);\r\n            }\r\n        });\r\n        \r\n        // Sort tools inside categories by date (newest first)? Optional but good practice.\r\n        // For now, just returning the merged list.\r\n        return [...staticCategoriesMap.values(), ...newCategoriesMap.values()];\r\n    }, [convertedApprovedTools, isRecent]);\r\n\r\n    // Mobile Categories (Sorted A-Z) - Derived from merged data to include server categories\r\n    const mobileCategories = useMemo(() => {\r\n        const allCats = mergedToolsData.map(cat => ({ id: cat.id, label: cat.name }));\r\n        const sorted = allCats.sort((a, b) => a.label.localeCompare(b.label));\r\n        return [{ id: 'all', label: 'Show All' }, ...sorted];\r\n    }, [mergedToolsData]);\r\n\r\n    const toolList = useMemo(() =>\r\n        mergedToolsData.flatMap((category) =>\r\n            category.tools.map((tool) => ({ ...tool, category: category.id }))\r\n        ), [mergedToolsData]);\r\n\r\n    const fuse = useMemo(() => {\r\n        let FuseCtor = null;\r\n        try {\r\n            if (typeof FuseNamespace === 'function') FuseCtor = FuseNamespace;\r\n            else if (FuseNamespace && FuseNamespace.default) FuseCtor = FuseNamespace.default;\r\n            else FuseCtor = FuseNamespace;\r\n        } catch (e) { FuseCtor = FuseNamespace; }\r\n\r\n        try {\r\n            return new FuseCtor(toolList, {\r\n                keys: [\r\n                    { name: 'name', weight: 0.7 },\r\n                    { name: 'tags', weight: 0.2 },\r\n                    { name: 'description', weight: 0.1 }\r\n                ],\r\n                threshold: 0.4,\r\n                includeScore: true\r\n            });\r\n        } catch (err) { return { search: () => [] }; }\r\n    }, [toolList]);\r\n\r\n    const handleInputChange = (e) => {\r\n        const value = e.target.value;\r\n        setSearchQuery(value);\r\n\r\n        // Auto-scroll to tools on mobile when typing\r\n        if (isMobile && value.trim().length > 0) {\r\n             const targetEl = document.getElementById('mobile-category-tabs') || document.getElementById('tools');\r\n             if (targetEl) {\r\n                 const rect = targetEl.getBoundingClientRect();\r\n                 // If the element is far down (hero visible), scroll it up.\r\n                 // Sticky header is 64px. If top is > 150, it's likely below the fold or hero is showing.\r\n                 if (rect.top > 150) {\r\n                    targetEl.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n                 }\r\n             }\r\n        }\r\n\r\n        setActiveSuggestionIndex(-1);\r\n        clearTimeout(debounceRef.current);\r\n        debounceRef.current = setTimeout(() => {\r\n            if (value.trim()) {\r\n                const results = fuse.search(value).map((r) => r.item).filter(item => item && item.name);\r\n                setSuggestions(results.slice(0, 5));\r\n            } else { setSuggestions([]); }\r\n        }, 150);\r\n    };\r\n\r\n    const filteredTools = useMemo(() => {\r\n        let result = mergedToolsData\r\n            .map((category) => ({\r\n                ...category,\r\n                tools: category.tools.filter((tool) => {\r\n                    if (!tool || !tool.name) return false;\r\n\r\n                    // 1. Search Filter\r\n                    const searchLower = searchQuery.toLowerCase();\r\n                    const matchesSearch = searchQuery\r\n                        ? tool.name.toLowerCase().includes(searchLower) || (tool.description ? tool.description.toLowerCase() : '').includes(searchLower)\r\n                        : true;\r\n\r\n                    // 2. Category Filter\r\n                    // If activeFilter is 'all', matches everything.\r\n                    // If 'choice', matches only tools with isAiToolsChoice (across all categories).\r\n                    // Otherwise, matches only tools in the active category (which is handled by outer map/filter usually, but here we can be explicit).\r\n                    // Note: The outer `.map` iterates all categories. We should filter out tools that don't belong if we are strictly in a category view?\r\n                    // Actually, usually we filter the *Categories* array first.\r\n                    // But `mergedToolsData` is the source.\r\n                    \r\n                    let matchesCategory = true;\r\n                    if (activeFilter === 'choice') {\r\n                        matchesCategory = tool.isAiToolsChoice || tool.badge === 'Recommended' || tool.badge === \"Editor's Choice\";\r\n                    } else if (activeFilter !== 'all') {\r\n                        matchesCategory = category.id === activeFilter;\r\n                    }\r\n\r\n                    // 3. Pricing Filter\r\n                    let matchesPricing = true;\r\n                    if (activePricing !== 'all') {\r\n                        const toolPricing = (tool.pricing || 'free').toLowerCase();\r\n                        if (activePricing === 'free') matchesPricing = toolPricing === 'free';\r\n                        else if (activePricing === 'freemium') matchesPricing = toolPricing === 'freemium';\r\n                        else if (activePricing === 'paid') matchesPricing = toolPricing === 'paid';\r\n                        else if (activePricing === 'open-source') matchesPricing = toolPricing === 'open source' || toolPricing === 'open-source';\r\n                    }\r\n\r\n                    // 4. Date Filter\r\n                    let matchesDate = true;\r\n                    const toolDate = new Date(tool.dateAdded || 0);\r\n                    const now = new Date();\r\n\r\n                    if (dateFilter.type === 'today') {\r\n                        matchesDate = toolDate.getDate() === now.getDate() &&\r\n                                      toolDate.getMonth() === now.getMonth() &&\r\n                                      toolDate.getFullYear() === now.getFullYear();\r\n                    } else if (dateFilter.type === 'month') {\r\n                        matchesDate = toolDate.getMonth() === now.getMonth() &&\r\n                                      toolDate.getFullYear() === now.getFullYear();\r\n                    } else if (dateFilter.type === 'custom' && dateFilter.value) {\r\n                         // Parse custom date (YYYY-MM-DD from input)\r\n                         // But we need to be careful about timezone. input=\"date\" returns YYYY-MM-DD.\r\n                         // new Date(\"YYYY-MM-DD\") is UTC.\r\n                         // We want to match local day.\r\n                         // Let's compare parts manually or use a helper.\r\n                         // Actually `new Date(string)` is usually UTC for hyphens.\r\n                         // Let's use string splitting to avoid timezone offset issues if possible, or force timezone consistency.\r\n                         // For simplicity, let's treat the input date as local components.\r\n                         const [y, m, d] = dateFilter.value.split('-').map(Number);\r\n                         // toolDate is local.\r\n                         matchesDate = toolDate.getDate() === d &&\r\n                                       toolDate.getMonth() === (m - 1) &&\r\n                                       toolDate.getFullYear() === y;\r\n                    }\r\n\r\n                    // 5. Name Filter (Letter)\r\n                    let matchesNameFilter = true;\r\n                    if (nameFilter.length > 0) {\r\n                        const firstChar = tool.name.trim().charAt(0).toUpperCase();\r\n                        matchesNameFilter = nameFilter.includes(firstChar);\r\n                    }\r\n\r\n                    return matchesSearch && matchesCategory && matchesPricing && matchesDate && matchesNameFilter;\r\n                }),\r\n            }))\r\n            .filter((category) => category.tools.length > 0);\r\n\r\n        // Sorting Logic applied to each category's tools\r\n        result = result.map(category => ({\r\n            ...category,\r\n            tools: [...category.tools].sort((a, b) => {\r\n                const nameA = a.name.toLowerCase();\r\n                const nameB = b.name.toLowerCase();\r\n                \r\n                if (sortOrder === 'name_asc') return nameA.localeCompare(nameB);\r\n                if (sortOrder === 'name_desc') return nameB.localeCompare(nameA);\r\n                \r\n                // fallback or default: 'date' (Newest First)\r\n                return (b.dateAdded || 0) - (a.dateAdded || 0);\r\n            })\r\n        }));\r\n\r\n        return result;\r\n    }, [searchQuery, activeFilter, activePricing, dateFilter, sortOrder, nameFilter, mergedToolsData]);\r\n\r\n    const allToolsFlatSorted = useMemo(() => {\r\n        // If searching, PRIORITIZE RELEVANCE from Fuse results\r\n        if (searchQuery.trim().length > 0) {\r\n             const results = fuse.search(searchQuery);\r\n             // Verify we have results\r\n             let searchHits = results.map(r => r.item).filter(t => t && t.name);\r\n\r\n             // Apply other filters (Category, Pricing, etc.) to these hits\r\n             // We do this manually because 'filteredTools' relies on the old .includes logic\r\n             searchHits = searchHits.filter(tool => {\r\n                   // Category\r\n                   let matchesCategory = true;\r\n                   if (activeFilter === 'choice') {\r\n                       matchesCategory = tool.isAiToolsChoice || tool.badge === 'Recommended' || tool.badge === \"Editor's Choice\";\r\n                   } else if (activeFilter !== 'all') {\r\n                       // We need to match category ID. Tool objects have 'category' property which is the slug ID.\r\n                       matchesCategory = tool.category === activeFilter;\r\n                   }\r\n                   \r\n                   // Pricing\r\n                   let matchesPricing = true;\r\n                   if (activePricing !== 'all') {\r\n                       const toolPricing = (tool.pricing || 'free').toLowerCase();\r\n                       if (activePricing === 'free') matchesPricing = toolPricing === 'free';\r\n                       else if (activePricing === 'freemium') matchesPricing = toolPricing === 'freemium';\r\n                       else if (activePricing === 'paid') matchesPricing = toolPricing === 'paid';\r\n                       else if (activePricing === 'open-source') matchesPricing = toolPricing === 'open source' || toolPricing === 'open-source';\r\n                   }\r\n\r\n                   // Date\r\n                   let matchesDate = true;\r\n                   const toolDate = new Date(tool.dateAdded || 0);\r\n                   const now = new Date();\r\n                   if (dateFilter.type === 'today') {\r\n                       matchesDate = toolDate.getDate() === now.getDate() && toolDate.getMonth() === now.getMonth() && toolDate.getFullYear() === now.getFullYear();\r\n                   } else if (dateFilter.type === 'month') {\r\n                       matchesDate = toolDate.getMonth() === now.getMonth() && toolDate.getFullYear() === now.getFullYear();\r\n                   } else if (dateFilter.type === 'custom' && dateFilter.value) {\r\n                        const [y, m, d] = dateFilter.value.split('-').map(Number);\r\n                        matchesDate = toolDate.getDate() === d && toolDate.getMonth() === (m - 1) && toolDate.getFullYear() === y;\r\n                   }\r\n\r\n                   // Name (Letter)\r\n                   let matchesNameFilter = true;\r\n                   if (nameFilter.length > 0) {\r\n                       const firstChar = tool.name.trim().charAt(0).toUpperCase();\r\n                       matchesNameFilter = nameFilter.includes(firstChar);\r\n                   }\r\n\r\n                   return matchesCategory && matchesPricing && matchesDate && matchesNameFilter;\r\n             });\r\n\r\n             return searchHits;\r\n        }\r\n\r\n        // Default behavior (Not searching)\r\n        const all = filteredTools.flatMap(category => category.tools.filter(t => t && t.name));\r\n        return all.sort((a, b) => {\r\n             const nameA = a.name.toLowerCase();\r\n             const nameB = b.name.toLowerCase();\r\n             if (sortOrder === 'name_asc') return nameA.localeCompare(nameB);\r\n             if (sortOrder === 'name_desc') return nameB.localeCompare(nameA);\r\n             return (b.dateAdded || 0) - (a.dateAdded || 0);\r\n        });\r\n    }, [filteredTools, sortOrder, searchQuery, fuse, activeFilter, activePricing, dateFilter, nameFilter]);\r\n\r\n    useEffect(() => {\r\n        const id = location.hash?.replace('#', '');\r\n        if (!id) return;\r\n        if (id === 'all') {\r\n            setActiveFilter('all');\r\n            setTimeout(() => {\r\n                const toolsEl = document.getElementById('tools');\r\n                if (toolsEl) toolsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n            }, 50);\r\n            return;\r\n        }\r\n        if (id === 'choice') {\r\n            setActiveFilter('choice');\r\n            setTimeout(() => {\r\n                const toolsEl = document.getElementById('tools');\r\n                if (toolsEl) toolsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n            }, 50);\r\n            return;\r\n        }\r\n        const allCategoryIds = mergedToolsData.map(c => c.id);\r\n        if (allCategoryIds.includes(id)) {\r\n            setActiveFilter(id);\r\n            setTimeout(() => {\r\n                const el = document.getElementById('tools');\r\n                if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n            }, 80);\r\n        }\r\n    }, [location.hash, mergedToolsData]);\r\n\r\n    // Ref to track if it's the first mount to avoid resetting page from URL\r\n    const isFirstRun = useRef(true);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (showMoreMenu && !event.target.closest('.more-menu-container')) {\r\n                setShowMoreMenu(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, [showMoreMenu]);\r\n\r\n    useEffect(() => {\r\n        // Skip the first run to allow state initialization from URL\r\n        if (isFirstRun.current) {\r\n            isFirstRun.current = false;\r\n            return;\r\n        }\r\n\r\n        setPage(1);\r\n        setMobileVisibleCount(PAGE_SIZE);\r\n        if (!isMobile) {\r\n            const params = new URLSearchParams(location.search || '');\r\n            if (params.get('page') !== '1') {\r\n                params.set('page', '1');\r\n                history.replace({ pathname: location.pathname, search: params.toString(), hash: location.hash });\r\n            }\r\n        }\r\n    }, [searchQuery, activeFilter, activePricing, sortOrder, isMobile]);\r\n\r\n    const updatePage = useCallback((next) => {\r\n        if (isMobile) return;\r\n        setPage(next);\r\n        const params = new URLSearchParams(location.search || '');\r\n        params.set('page', String(next));\r\n        history.replace({ pathname: location.pathname || '/', search: params.toString(), hash: location.hash });\r\n        setTimeout(() => {\r\n            const toolsEl = document.getElementById('tools');\r\n            if (toolsEl) toolsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n        }, 50);\r\n    }, [history, location.pathname, location.search, location.hash, isMobile]);\r\n\r\n    const loadMoreMobile = useCallback(() => setMobileVisibleCount(c => c + PAGE_SIZE), []);\r\n\r\n    const buildPageList = useCallback((totalPages, current) => {\r\n        if (totalPages <= 7) return Array.from({ length: totalPages }, (_, i) => i + 1);\r\n        const pages = [];\r\n        const add = (p) => { if (!pages.includes(p)) pages.push(p); };\r\n        add(1);\r\n        const windowStart = Math.max(2, current - 1);\r\n        const windowEnd = Math.min(totalPages - 1, current + 1);\r\n        if (windowStart > 2) pages.push('');\r\n        for (let p = windowStart; p <= windowEnd; p++) add(p);\r\n        if (windowEnd < totalPages - 1) pages.push('');\r\n        add(totalPages);\r\n        return pages;\r\n    }, []);\r\n\r\n    const trendingTools = useMemo(() => toolList.filter((t) => t.badge === 'Recommended'), [toolList]);\r\n    const newTools = useMemo(() => toolList.filter((t) => t.isNew), [toolList]);\r\n    const categories = useMemo(() => {\r\n        const base = [{ id: 'all', name: 'All Tools' }, ...mergedToolsData];\r\n        return base.map(cat => ({\r\n            id: cat.id,\r\n            label: cat.name.replace(/-/g, ' ').replace(/\\b\\w/g, c => c.toUpperCase())\r\n        }));\r\n    }, [mergedToolsData]);\r\n\r\n    const { visibleCategories, hiddenCategories } = useMemo(() => {\r\n        const priorityIds = [\r\n            'all', 'ai-coding-assistants', 'faceless-video', 'video-generators', 'writing-tools', \r\n            'presentation-tools', 'short-clippers', 'marketing-tools', 'voice-tools', 'website-builders'\r\n        ];\r\n        // Get priority items in order\r\n        const priority = priorityIds.map(id => categories.find(c => c.id === id)).filter(Boolean);\r\n        // Get rest items (excluding priority ones)\r\n        const rest = categories.filter(c => !priorityIds.includes(c.id));\r\n        \r\n        // Combine: Priority (Top 10) + Rest \r\n        // Note: Use only first 10 of priority as visible if we strictly want 10. \r\n        // Logic: The requirement is Top 10 visible. \r\n        // So we take the full combined list and slice it.\r\n        const all = [...priority, ...rest];\r\n        return {\r\n            visibleCategories: all.slice(0, 10),\r\n            hiddenCategories: all.slice(10)\r\n        };\r\n    }, [categories]);\r\n\r\n    const debugMode = (() => {\r\n        try { return new URLSearchParams(location.search || '').get('debug') === '1'; }\r\n        catch { return false; }\r\n    })();\r\n\r\n    // Categories logic\r\n    const curatedBase = [\r\n        'all',\r\n        'ai-coding-assistants',\r\n        'faceless-video',\r\n        'video-generators',\r\n        'writing-tools',\r\n        'presentation-tools',\r\n        'short-clippers',\r\n        'marketing-tools',\r\n        'voice-tools',\r\n        'website-builders',\r\n        'image-generators',\r\n        'email-assistance',\r\n        'chatbots',\r\n        'music-generators',\r\n        'data-analysis',\r\n        'gaming-tools',\r\n        'ai-diagrams',\r\n        'ai-scheduling',\r\n        'data-visualization',\r\n        'utility-tools',\r\n        'Portfolio',\r\n        'text-humanizer-ai',\r\n        'meeting-notes',\r\n        'spreadsheet-tools'\r\n    ];\r\n\r\n    const labelFor = (id) => (\r\n        id === 'all' ? 'All' :\r\n            id === 'ai-coding-assistants' ? 'Ai Coding Assistants' :\r\n                id === 'faceless-video' ? 'Faceless Video' :\r\n                    id === 'video-generators' ? 'Video Generators' :\r\n                        id === 'writing-tools' ? 'Writing Tools' :\r\n                            id === 'presentation-tools' ? 'Presentation Tools' :\r\n                                id === 'short-clippers' ? 'Short Clippers' :\r\n                                    id === 'marketing-tools' ? 'Marketing Tools' :\r\n                                        id === 'voice-tools' ? 'Voice Tools' :\r\n                                            id === 'website-builders' ? 'Website Builders' :\r\n                                                id === 'image-generators' ? 'Image Generators' :\r\n                                                    id === 'email-assistance' ? 'Email Assistance' :\r\n                                                        id === 'chatbots' ? 'Chatbots' :\r\n                                                            id === 'music-generators' ? 'Music Generators' :\r\n                                                                id === 'data-analysis' ? 'Data Analysis' :\r\n                                                                    id === 'gaming-tools' ? 'Gaming Tools' :\r\n                                                                        id === 'ai-diagrams' ? 'Ai Diagrams' :\r\n                                                                            id === 'ai-scheduling' ? 'Ai Scheduling' :\r\n                                                                                id === 'data-visualization' ? 'Data Visualization' :\r\n                                                                                    id === 'utility-tools' ? 'Utility Tools' :\r\n                                                                                        id === 'Portfolio' ? 'Portfolio' :\r\n                                                                                            id === 'text-humanizer-ai' ? 'Text Humanizer Ai' :\r\n                                                                                                id === 'meeting-notes' ? 'Meeting Notes' :\r\n                                                                                                    id === 'spreadsheet-tools' ? 'Spreadsheet Tools' :\r\n                                                                                                        id === 'choice' ? 'Admin Choice' :\r\n                                                                                                            id.replace(/-/g, ' ').replace(/\\b\\w/g, c => c.toUpperCase())\r\n    );\r\n\r\n    const userCats = Array.from(new Set((convertedApprovedTools || []).map(t => t.category).filter(Boolean)));\r\n    const dataCats = toolsData.map(c => c.id);\r\n    const allSet = Array.from(new Set(['all', ...curatedBase.filter(id => id !== 'all'), ...dataCats, ...userCats]));\r\n    const extra = allSet.filter(id => !curatedBase.includes(id));\r\n    const collapsed = [...curatedBase, '__more__'];\r\n    const expanded = [...curatedBase, ...extra];\r\n    const categoriesToShow = showAllCategories ? expanded : collapsed;\r\n\r\n    return (\r\n        <>\r\n            <LazyMotion features={domAnimation}>\r\n                {/* Changed overflow-hidden to visible (default) to allow sticky children to work reliably */}\r\n                <div className=\"min-h-screen text-white relative\">\r\n                    {debugMode && (\r\n                        <div className=\"fixed top-2 left-2 z-[1000] p-3 rounded-lg bg-black/70 text-xs font-mono border border-white/20 shadow-lg space-y-1\">\r\n                            <div><strong>DEBUG</strong></div>\r\n                            <div>API_URL: {API_URL}</div>\r\n                            <div>approvedTools: {approvedTools.length}</div>\r\n                            <div>convertedApprovedTools: {convertedApprovedTools.length}</div>\r\n                            <div>merged toolList: {toolList.length}</div>\r\n                            <div>activeFilter: {activeFilter}</div>\r\n                            <div>searchQuery: {searchQuery || '(empty)'}</div>\r\n                        </div>\r\n                    )}\r\n                    {/* Global Single Background for Entire Page */}\r\n                    <div className=\"fixed inset-0 z-0\">\r\n                        {/* Base gradient background - Deep Navy Blue */}\r\n                        <div className=\"absolute inset-0 bg-gradient-to-br from-[#1a1d3a] via-[#252847] to-[#1a1d3a]\" />\r\n                        {/* Background image layer for Home page */}\r\n                        <div\r\n                            aria-hidden=\"true\"\r\n                            className=\"absolute inset-0 bg-center bg-no-repeat bg-cover opacity-60 animate-subtle-zoom\"\r\n                            style={{\r\n                                backgroundImage: `url(${process.env.PUBLIC_URL || ''}/Images/home-bg.jpg)`,\r\n                                transformOrigin: 'center center',\r\n                                backgroundBlendMode: 'soft-light'\r\n                            }}\r\n                        />\r\n\r\n                        {/* Radial gradient overlays for depth */}\r\n                        <div className=\"absolute inset-0 bg-[radial-gradient(ellipse_at_top_left,_var(--tw-gradient-stops))] from-blue-600/15 via-transparent to-transparent\" />\r\n                        <div className=\"absolute inset-0 bg-black\" />\r\n                        <div className=\"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom,_var(--tw-gradient-stops))] from-cyan-600/10 via-transparent to-transparent\" />\r\n\r\n\r\n                        <style>{`\r\n                            @keyframes gridMove {\r\n                                0% { background-position: 0 0; }\r\n\r\n                                100% { background-position: 0 60px; }\r\n                            }\r\n                            @media (min-width: 1024px) {\r\n                                .desktop-hero-zoom {\r\n                                    zoom: 0.90;\r\n                                }\r\n                            }\r\n                        `}</style>\r\n\r\n                        {/* Animated gradient orbs - Enhanced with Framer Motion & Color Shift */}\r\n\r\n                    </div >\r\n\r\n                    {/* Sidebar has been moved to a global component (src/components/Sidebar.jsx) so it appears on every route */}\r\n\r\n                    {/* Unified Sticky Navigation (Search + Categories) */}\r\n                    {/* Fixed Nav removed in favor of in-flow Sticky Nav */}\r\n\r\n                    {/* Spacer to prevent collision with content when sticky bar is visible */}\r\n                    {\r\n                        showStickyNav && (\r\n                            <div aria-hidden=\"true\" className=\"w-full\" style={{ height: stickyHeight || 72 }} />\r\n                        )\r\n                    }\r\n\r\n                    {/* Hero Section - Dominic Style - Clean, Dark, Bold */}\r\n                    <section\r\n                        ref={searchSectionRef}\r\n                        className={`desktop-hero-zoom relative pt-32 pb-8 md:pb-24 px-6 sm:px-12 lg:px-24 z-20 flex flex-col transition-opacity duration-300 ${showStickyNav ? 'opacity-0 pointer-events-none select-none' : 'opacity-100'}`}\r\n                        aria-hidden={showStickyNav ? 'true' : 'false'}\r\n                    >\r\n                        {/* Background Elements - Minimal & Dark */}\r\n                        <div className=\"absolute inset-0 z-0 pointer-events-none overflow-hidden bg-black rounded-b-[60px]\">\r\n                             {/* Gradient overlay for bottom fade only */}\r\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10\" />\r\n                            \r\n                            {/* Central Hero Image */}\r\n                            <div className=\"absolute inset-x-0 bottom-0 top-0 flex items-center justify-center opacity-100\">\r\n                                <img \r\n                                    src=\"/Images/hero-person.png\" \r\n                                    alt=\"Hero Persona\" \r\n                                    className=\"h-[110%] w-auto object-cover object-top mask-image-linear-gradient opacity-90\"\r\n                                    style={{ \r\n                                        maskImage: 'linear-gradient(to bottom, black 60%, transparent 100%)',\r\n                                        WebkitMaskImage: 'linear-gradient(to bottom, black 60%, transparent 100%)' \r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"relative z-10 max-w-7xl w-full mx-auto grid lg:grid-cols-2 gap-12 items-center\">\r\n                            \r\n                            {/* Left Content */}\r\n                            <div className=\"text-left space-y-8\">\r\n                                {/* Badge */}\r\n                                <div className=\"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm\">\r\n                                    <span className=\"w-2 h-2 rounded-full bg-[#FF6B00] animate-pulse\" />\r\n                                    <span className=\"text-xs font-semibold text-gray-300 tracking-wide uppercase\">Available for Everyone</span>\r\n                                </div>\r\n\r\n                                {/* Main Heading */}\r\n                                <div>\r\n                                    <h1 className=\"text-6xl sm:text-8xl lg:text-9xl font-black text-white tracking-tighter leading-[0.85]\">\r\n                                        Discover <br />\r\n                                        <span className=\"text-white\">Intelligent</span> <br />\r\n                                        Tools.\r\n                                    </h1>\r\n                                </div>\r\n\r\n                                {/* Subtitle */}\r\n                                <p className=\"text-lg text-gray-400 max-w-lg leading-relaxed font-light\">\r\n                                    Curated AI resources to elevate your workflow. <br/>\r\n                                    Find the perfect tool to \r\n                                    <span className=\"text-white font-medium\"> automate</span>, \r\n                                    <span className=\"text-white font-medium\"> create</span>, and \r\n                                    <span className=\"text-white font-medium\"> innovate</span>.\r\n                                </p>\r\n\r\n                                {/* CTA Button */}\r\n                                <div className=\"flex flex-wrap gap-4\">\r\n                                    <m.button\r\n                                        onClick={() => {\r\n                                            const toolsSection = document.getElementById('tools');\r\n                                            if (toolsSection) toolsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n                                        }}\r\n                                        whileHover={{ scale: 1.02 }}\r\n                                        whileTap={{ scale: 0.98 }}\r\n                                        className=\"group flex items-center gap-3 px-8 py-4 bg-[#FF6B00] hover:bg-[#ff8533] rounded-full text-white text-base font-bold transition-all shadow-lg shadow-orange-500/20\"\r\n                                    >\r\n                                        Explore Tools\r\n                                        <svg className=\"w-4 h-4 transition-transform group-hover:translate-x-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n                                        </svg>\r\n                                    </m.button>\r\n                                </div>\r\n\r\n                                {/* Mobile Stats Row (Fills gap) */}\r\n                                <div className=\"lg:hidden grid grid-cols-3 divide-x divide-white/10 border-t border-white/10 pt-6 mt-6\">\r\n                                    <div className=\"text-center px-2\">\r\n                                        <div className=\"text-2xl font-black text-white\">300+</div>\r\n                                        <div className=\"text-[10px] text-gray-500 font-medium uppercase tracking-wider mt-0.5\">Tools</div>\r\n                                    </div>\r\n                                    <div className=\"text-center px-2\">\r\n                                        <div className=\"text-2xl font-black text-white\">100%</div>\r\n                                        <div className=\"text-[10px] text-gray-500 font-medium uppercase tracking-wider mt-0.5\">Free</div>\r\n                                    </div>\r\n                                    <div className=\"text-center px-2\">\r\n                                        <div className=\"text-2xl font-black text-white\">20+</div>\r\n                                        <div className=\"text-[10px] text-gray-500 font-medium uppercase tracking-wider mt-0.5\">Cats</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Right Content - Stats / Visuals */}\r\n                            <div className=\"hidden lg:flex flex-col gap-8 items-end text-right\">\r\n                                <div className=\"space-y-6\">\r\n                                     <div className=\"group\">\r\n                                        <h3 className=\"text-6xl font-black text-white group-hover:text-[#FF6B00] transition-colors duration-300\">300+</h3>\r\n                                        <p className=\"text-sm text-gray-500 font-medium uppercase tracking-widest mt-1\">AI Tools</p>\r\n                                     </div>\r\n                                     <div className=\"w-full h-px bg-white/10\" />\r\n                                     <div className=\"group\">\r\n                                        <h3 className=\"text-6xl font-black text-white group-hover:text-[#FF6B00] transition-colors duration-300\">100%</h3>\r\n                                        <p className=\"text-sm text-gray-500 font-medium uppercase tracking-widest mt-1\">Free & Verified</p>\r\n                                     </div>\r\n                                     <div className=\"w-full h-px bg-white/10\" />\r\n                                     <div className=\"group\">\r\n                                        <h3 className=\"text-6xl font-black text-white group-hover:text-[#FF6B00] transition-colors duration-300\">20+</h3>\r\n                                        <p className=\"text-sm text-gray-500 font-medium uppercase tracking-widest mt-1\">Categories</p>\r\n                                     </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Tool of the Day */}\r\n                    <ToolOfTheDay />\r\n\r\n                    {/* Unified Sticky Navigation - In Flow */}\r\n                    {(!isMobile) && (\r\n                        <div className={`sticky top-0 z-50 ${isMobile ? '' : 'ml-20'}`}>\r\n                            <div className=\"bg-[#050505]/95 backdrop-blur-2xl border-b border-white/10 shadow-2xl\">\r\n                                <div className=\"max-w-7xl mx-auto px-4 pt-4 pb-2\">\r\n                                    <div className=\"flex flex-col md:flex-row items-center justify-between gap-6 mb-4\">\r\n                                        {/* Left: Title */}\r\n                                        <div className=\"text-center md:text-left\">\r\n                                            <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                                                <span className=\"text-[#FF6B00]\">Browse</span> by Category\r\n                                            </h2>\r\n                                            <p className=\"text-xs text-gray-400\">Explore tools organized by their purpose</p>\r\n                                        </div>\r\n\r\n                                        {/* Middle/Right: Search Bar (Integrated) */}\r\n                                        <div className=\"w-full md:w-[400px] relative group\">\r\n                                             <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-500 group-focus-within:text-[#FF6B00] transition-colors\">\r\n                                                <FaSearch />\r\n                                             </div>\r\n                                             <input\r\n                                                type=\"text\"\r\n                                                placeholder=\"Search AI tools...\"\r\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#FF6B00]/50 focus:bg-white/10 transition-all shadow-inner\"\r\n                                                value={searchQuery}\r\n                                                onChange={handleInputChange}\r\n                                             />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Category Pills - Custom Scrollbar */}\r\n                                    {/* Category Pills - Custom Scrollbar */}\r\n                                    <div className=\"relative group/cats flex items-center\">\r\n                                        <div className=\"flex-1 flex items-center gap-2 overflow-x-auto pb-1 scrollbar-hide mask-linear-fade\">\r\n                                            {visibleCategories.map((cat) => {\r\n                                                const isActive = activeFilter === cat.id;\r\n                                                return (\r\n                                                    <button\r\n                                                        key={cat.id}\r\n                                                        onClick={() => setActiveFilter(cat.id)}\r\n                                                        className={`px-4 py-1.5 text-xs font-bold uppercase tracking-wider rounded-lg transition-all whitespace-nowrap border ${\r\n                                                            isActive \r\n                                                            ? 'bg-[#FF6B00] text-white border-[#FF6B00] shadow-lg shadow-orange-900/20' \r\n                                                            : 'bg-white/5 text-gray-400 border-white/10 hover:bg-white/10 hover:text-white hover:border-white/20'\r\n                                                        }`}\r\n                                                    >\r\n                                                        {cat.label}\r\n                                                    </button>\r\n                                                )\r\n                                            })}\r\n                                        </div>\r\n\r\n                                        {/* MORE BUTTON - Moved outside scroll container to prevent clipping */}\r\n                                        {hiddenCategories.length > 0 && (\r\n                                            <div className=\"relative more-menu-container ml-2 shrink-0\">\r\n                                                <button \r\n                                                    onClick={() => setShowMoreMenu(!showMoreMenu)}\r\n                                                    className={`px-4 py-1.5 text-xs font-bold uppercase tracking-wider rounded-lg transition-all whitespace-nowrap border flex items-center gap-2 ${\r\n                                                        showMoreMenu \r\n                                                        ? 'bg-white/10 text-white border-white/20' \r\n                                                        : 'bg-white/5 text-gray-400 border-white/10 hover:bg-white/10 hover:text-white hover:border-white/20'\r\n                                                    }`}\r\n                                                >\r\n                                                    More\r\n                                                    <FaChevronRight className={`text-[10px] transition-transform ${showMoreMenu ? 'rotate-90' : 'rotate-0'}`} />\r\n                                                </button>\r\n\r\n                                                {/* Dropdown Menu */}\r\n                                                {showMoreMenu && (\r\n                                                    <div className=\"absolute top-full right-0 mt-2 w-64 bg-[#0A0A0A] border border-white/10 rounded-xl shadow-2xl z-[60] overflow-hidden backdrop-blur-xl p-2 grid grid-cols-1 gap-1 max-h-[60vh] overflow-y-auto custom-modal-scrollbar\">\r\n                                                        {hiddenCategories.map((cat) => {\r\n                                                            const isActive = activeFilter === cat.id;\r\n                                                            return (\r\n                                                                <button\r\n                                                                    key={cat.id}\r\n                                                                    onClick={() => {\r\n                                                                        setActiveFilter(cat.id);\r\n                                                                        setShowMoreMenu(false);\r\n                                                                    }}\r\n                                                                    className={`w-full text-left px-4 py-3 text-xs font-bold uppercase tracking-wider rounded-lg transition-all ${\r\n                                                                        isActive \r\n                                                                        ? 'bg-[#FF6B00] text-white shadow-md' \r\n                                                                        : 'text-gray-400 hover:bg-white/5 hover:text-white'\r\n                                                                    }`}\r\n                                                                >\r\n                                                                    {cat.label}\r\n                                                                </button>\r\n                                                            )\r\n                                                        })}\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n                                    {/* Fade Edges */}\r\n                                        <div className=\"absolute inset-y-0 right-0 w-12 bg-gradient-to-l from-[#050505] to-transparent pointer-events-none\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n\r\n\r\n                    {/* New 'Dominic' Theme Sections - Placed after Hero */}\r\n\r\n\r\n                    {/* Mobile Top Nav - Logo + Categories/Picks (Mobile Only) */}\r\n                    {\r\n                        isMobile && (\r\n                            <MobileTopNav\r\n                                categories={mobileCategories}\r\n                                searchQuery={searchQuery}\r\n                                onSearchChange={handleInputChange}\r\n                                onCategorySelect={(id) => {\r\n                                    setActiveFilter(id);\r\n                                    setTimeout(() => {\r\n                                        if (id === 'all') {\r\n                                            const toolsEl = document.getElementById('tools');\r\n                                            if (toolsEl) toolsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n                                        } else {\r\n                                            const el = document.querySelector(`[data-category=\"${id}\"]`);\r\n                                            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n                                        }\r\n                                    }, 50);\r\n                                }}\r\n                                onChoiceClick={() => {\r\n                                    setActiveFilter('choice');\r\n                                    // history.push('/#choice'); // Optional: update URL\r\n                                    setTimeout(() => {\r\n                                        const toolsEl = document.getElementById('tools');\r\n                                        if (toolsEl) toolsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n                                    }, 50);\r\n                                }}\r\n                                onLogoClick={() => {\r\n                                    setActiveFilter('all');\r\n                                    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                                }}\r\n                            />\r\n                        )\r\n                    }\r\n\r\n                    {/* Mobile Top Margin (accounts for fixed MobileTopNav) */}\r\n                    {isMobile && <div className=\"h-16 md:hidden\" />}\r\n\r\n                    {/* Mobile Tools FAB and Categories Drop-up  removed in favor of MobileCategoryTabs */}\r\n\r\n                    {/* Mobile Category Tabs (static, non-sticky) */}\r\n                    {\r\n                        isMobile && (\r\n                                <MobileCategoryTabs\r\n                                    categories={[\r\n                                        { id: 'all', label: \"New Tools\" },\r\n                                        { id: 'chatbots', label: 'ChatGPT Alternatives' },\r\n                                        { id: 'ai-coding-assistants', label: 'AI Coding Assistants' },\r\n                                        ...categories.filter(c => !['all', 'chatbots', 'ai-coding-assistants'].includes(c.id))\r\n                                    ]}\r\n                                    activeId={activeFilter}\r\n                                    onSelect={(id) => {\r\n                                        setActiveFilter(id);\r\n                                        setTimeout(() => {\r\n                                            if (id === 'all') {\r\n                                                const toolsEl = document.getElementById('tools');\r\n                                                if (toolsEl) toolsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n                                            } else {\r\n                                                const el = document.querySelector(`[data-category=\"${id}\"]`);\r\n                                                if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n                                            }\r\n                                        }, 50);\r\n                                    }}\r\n                                />\r\n                        )\r\n                    }\r\n\r\n                    {/* Main Content */}\r\n                    <div className={`transition-all duration-300 relative z-30 ${isMobile ? '' : 'ml-20'}`}>\r\n                        <div className=\"w-full px-6 lg:px-12\">\r\n                            {/* Main content area - Full width */}\r\n                            <main className=\"w-full\">\r\n                                 {/* Carousels Section - Replaced with Cinematic Motion Carousel */}\r\n                                 {/* Carousels Section - Replaced with Cinematic Motion Carousel */}\r\n\r\n                                {/* Category Filter Buttons - Hidden on Mobile (replaced by tabs) */}\r\n                                {/* Category Filter Buttons - Integrated into sticky bar now */}\r\n\r\n                                {/* Tools Grid Section */}\r\n                                <section\r\n                                    id=\"tools\"\r\n                                    className=\"relative px-4 sm:px-6 lg:px-8 py-4\"\r\n                                >\r\n                                    {/* Breadcrumb Navigation */}\r\n                                    {activeFilter !== 'all' && (\r\n                                        <div className=\"max-w-7xl mx-auto mb-6 relative\">\r\n                                            <div className=\"flex items-center gap-2 text-sm text-gray-400\">\r\n                                                <button onClick={() => setActiveFilter('all')} className=\"hover:text-white transition-colors\">\r\n                                                    Home\r\n                                                </button>\r\n                                                <span>/</span>\r\n                                                <span className=\"text-white capitalize\">{activeFilter.replace(/-/g, ' ')}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"w-full relative flex flex-col lg:flex-row gap-8\">\r\n                                        {/* Left Sidebar: Filtering & Controls - Sticky */}\r\n                                        <aside className={`w-full lg:w-48 xl:w-64 flex-shrink-0 space-y-8 z-30 self-start ${isMobile ? 'mb-6' : 'lg:sticky lg:top-32'}`}>\r\n                                            {/* Header Group */}\r\n                                            <div className=\"space-y-4\">\r\n                                                <div className=\"flex items-center\">\r\n                                                    <h2 className=\"text-2xl font-bold text-white whitespace-nowrap\">\r\n                                                        {activeFilter === 'all' ? 'All AI Tools' : labelFor(activeFilter)}\r\n                                                    </h2>\r\n                                                </div>\r\n                                                \r\n                                                {!isMobile && (\r\n                                                    <div className=\"text-sm font-medium text-gray-500 bg-white/5 py-1 px-3 rounded-md border border-white/5 inline-block\">\r\n                                                        {filteredTools.reduce((acc, cat) => acc + cat.tools.length, 0)} Tools\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n\r\n                                            {/* Filters Stack */}\r\n                                            {!isMobile && (\r\n                                                <div className=\"space-y-4 pt-4 border-t border-white/5\">\r\n                                                    <div className=\"space-y-2\">\r\n                                                        <label className=\"text-xs text-gray-400 font-semibold uppercase tracking-wider ml-1\">Pricing</label>\r\n                                                        <PricingDropdown\r\n                                                            activePricing={activePricing}\r\n                                                            handlePricing={setActivePricing}\r\n                                                        />\r\n                                                    </div>\r\n                                                    <div className=\"space-y-2\">\r\n                                                        <label className=\"text-xs text-gray-400 font-semibold uppercase tracking-wider ml-1\">Sort By</label>\r\n                                                        <UnifiedSortDropdown\r\n                                                            dateFilter={dateFilter}\r\n                                                            handleDateFilter={setDateFilter}\r\n                                                            sortOrder={sortOrder}\r\n                                                            handleSortOrder={setSortOrder}\r\n                                                            nameFilter={nameFilter}\r\n                                                            handleNameFilter={setNameFilter}\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            {/* Mobile Controls */}\r\n                                            {isMobile && (\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <div className=\"origin-left\">\r\n                                                        <MobileSortMenu\r\n                                                            activePricing={activePricing}\r\n                                                            setActivePricing={setActivePricing}\r\n                                                            sortOrder={sortOrder}\r\n                                                            setSortOrder={setSortOrder}\r\n                                                        />\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => setViewMode(prev => (prev === 'grid' ? 'list' : 'grid'))}\r\n                                                        className=\"p-2 bg-white/10 rounded-lg border border-white/20 text-white\"\r\n                                                    >\r\n                                                        {viewMode === 'grid' ? (\r\n                                                            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path d=\"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" /></svg>\r\n                                                        ) : (\r\n                                                            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M4 6h16a1 1 0 000-2H4a1 1 0 000 2zm0 7h16a1 1 0 000-2H4a1 1 0 000 2zm0 7h16a1 1 0 000-2H4a1 1 0 000 2z\" /></svg>\r\n                                                        )}\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n                                        </aside>\r\n\r\n                                        {/* Main Content Grid */}\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            {/* Desktop View Toggle (Aligned Right) */}\r\n                                            {!isMobile && (\r\n                                                <div className=\"flex justify-end mb-6\">\r\n                                                     <button\r\n                                                        onClick={() => setViewMode(prev => (prev === 'grid' ? 'list' : 'grid'))}\r\n                                                        title={viewMode === 'grid' ? 'Switch to list view' : 'Switch to grid view'}\r\n                                                        className={`backdrop-blur-md text-white rounded-lg border transition-all duration-200 p-2 ${\r\n                                                            viewMode === 'grid' ? 'bg-white/10 border-white/20 hover:bg-white/20' : 'bg-blue-600/20 border-blue-400/30 hover:bg-blue-600/30'\r\n                                                        }`}\r\n                                                    >\r\n                                                        {viewMode === 'grid' ? (\r\n                                                            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path d=\"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" /></svg>\r\n                                                        ) : (\r\n                                                            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M4 6h16a1 1 0 000-2H4a1 1 0 000 2zm0 7h16a1 1 0 000-2H4a1 1 0 000 2zm0 7h16a1 1 0 000-2H4a1 1 0 000 2z\" /></svg>\r\n                                                        )}\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n                                            {isLoading ? (\r\n                                                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                                                    {[...Array(6)].map((_, i) => (\r\n                                                        <div key={i} className=\"bg-gray-900/40 rounded-xl overflow-hidden border border-white/5 h-full flex flex-col\">\r\n                                                            <div className=\"h-48 bg-white/5 animate-pulse\" />\r\n                                                            <div className=\"p-5 space-y-4 flex-1\">\r\n                                                                <div className=\"h-6 bg-white/5 rounded w-3/4 animate-pulse\" />\r\n                                                                <div className=\"space-y-2\">\r\n                                                                    <div className=\"h-4 bg-white/5 rounded w-full animate-pulse\" />\r\n                                                                    <div className=\"h-4 bg-white/5 rounded w-2/3 animate-pulse\" />\r\n                                                                </div>\r\n                                                                <div className=\"pt-4 flex items-center gap-2\">\r\n                                                                    <div className=\"h-6 w-16 bg-white/5 rounded-full animate-pulse\" />\r\n                                                                    <div className=\"h-6 w-16 bg-white/5 rounded-full animate-pulse\" />\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            ) : filteredTools.length === 0 ? (\r\n                                                <div className=\"text-center py-20\">\r\n                                                    {typeof Player !== 'undefined' && Player ? (\r\n                                                        <Player autoplay loop src=\"https://assets4.lottiefiles.com/packages/lf20_pNx6yH.json\" style={{ height: '150px', width: '150px', margin: '0 auto' }} />\r\n                                                    ) : (\r\n                                                        <div style={{ height: 150, width: 150, margin: '0 auto' }} className=\"bg-gray-800 rounded-md\" />\r\n                                                    )}\r\n                                                    <h3 className=\"text-2xl font-semibold text-white mt-4\">No Tools Found</h3>\r\n                                                    <p className=\"text-gray-400 mt-2\">Try adjusting your search or filter to find what you're looking for.</p>\r\n                                                </div>\r\n\r\n                                            ) : (\r\n                                                 <>\r\n                                                    <div className=\"mb-12\">\r\n                                                        {(() => {\r\n                                                            const allTools = allToolsFlatSorted;\r\n                                                            const total = allTools.length;\r\n                                                            let displayed = allTools;\r\n\r\n                                                            if (isMobile) {\r\n                                                                displayed = allTools.slice(0, mobileVisibleCount);\r\n                                                            } else {\r\n                                                                const totalPages = Math.max(1, Math.ceil(total / PAGE_SIZE));\r\n                                                                const currentPage = Math.min(page, totalPages);\r\n                                                                const start = (currentPage - 1) * PAGE_SIZE;\r\n                                                                const end = start + PAGE_SIZE;\r\n                                                                // Bento Grid Slicing logic\r\n                                                                displayed = allTools.slice(start, end);\r\n                                                            }\r\n\r\n                                                            if (viewMode === 'grid') {\r\n                                                                return (\r\n                                                                    <>\r\n                                                                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 auto-rows-[minmax(180px,auto)] gap-4 sm:gap-6 grid-flow-row-dense\">\r\n                                                                            {displayed.map((tool, idx) => {\r\n                                                                                // Bento Grid Pattern Logic\r\n                                                                                // Pattern spans 10 items\r\n                                                                                const patternIndex = idx % 10;\r\n                                                                                let spanClass = \"col-span-1 row-span-1\";\r\n                                                                                \r\n                                                                                // Only apply bento sizing on desktop\r\n                                                                                if (!isMobile) {\r\n                                                                                    if (patternIndex === 0) spanClass = \"md:col-span-2 md:row-span-2\"; // Big Feature\r\n                                                                                    else if (patternIndex === 3) spanClass = \"md:col-span-1 md:row-span-1 lg:row-span-1\"; \r\n                                                                                    else if (patternIndex === 6) spanClass = \"md:col-span-2 md:row-span-1\"; // Wide\r\n                                                                                    else if (patternIndex === 7) spanClass = \"md:row-span-2\"; // Tall\r\n                                                                                }\r\n\r\n                                                                                return (\r\n                                                                                    <ToolCard \r\n                                                                                        key={`${tool.name}-${tool.dateAdded || idx}`}\r\n                                                                                        tool={tool} \r\n                                                                                        className={spanClass}\r\n                                                                                        // Pass style or other props if needed\r\n                                                                                    />\r\n                                                                                );\r\n                                                                            })}\r\n                                                                        </div>\r\n                                                                        \r\n                                                                        {/* Mobile Load More */}\r\n                                                                        {isMobile && mobileVisibleCount < total && (\r\n                                                                            <div className=\"mt-8 flex justify-center\">\r\n                                                                                <button onClick={loadMoreMobile} className=\"px-6 py-3 rounded-xl bg-white/10 hover:bg-white/20 text-white text-sm font-medium backdrop-blur-md border border-white/20 hover:border-white/30 transition-all\">Load More ({Math.min(mobileVisibleCount + PAGE_SIZE, total)}/{total})</button>\r\n                                                                            </div>\r\n                                                                        )}\r\n\r\n                                                                        {/* Desktop Pagination */}\r\n                                                                        {!isMobile && total > PAGE_SIZE && (\r\n                                                                            <div className=\"mt-16 flex items-center justify-center gap-2 flex-wrap\">\r\n                                                                                <button onClick={() => updatePage(Math.max(1, page - 1))} disabled={page === 1} aria-label=\"Previous page\" className={`px-4 py-3 rounded-xl text-sm font-medium border transition-colors ${page === 1 ? 'border-white/5 bg-white/5 text-gray-500 cursor-not-allowed' : 'border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/20 text-white'}`}>Prev</button>\r\n                                                                                {buildPageList(Math.ceil(total / PAGE_SIZE), page).map((p, i) => (\r\n                                                                                    p === '' ? (\r\n                                                                                        <span key={`dots-${i}`} className=\"px-3 py-3 text-sm text-gray-400\"></span>\r\n                                                                                    ) : (\r\n                                                                                        <button key={`page-${p}`} onClick={() => updatePage(p)} aria-current={p === page ? 'page' : undefined} className={`w-10 h-10 flex items-center justify-center rounded-xl text-sm font-medium border transition-all ${p === page ? 'bg-[#FF6B00] text-white border-orange-500 shadow-lg shadow-orange-500/20' : 'border-white/10 bg-white/5 text-gray-300 hover:bg-white/10 hover:text-white hover:border-white/20'}`}>{p}</button>\r\n                                                                                    )\r\n                                                                                ))}\r\n                                                                                <button onClick={() => updatePage(Math.min(Math.ceil(total / PAGE_SIZE), page + 1))} disabled={page >= Math.ceil(total / PAGE_SIZE)} aria-label=\"Next page\" className={`px-4 py-3 rounded-xl text-sm font-medium border transition-colors ${page >= Math.ceil(total / PAGE_SIZE) ? 'border-white/5 bg-white/5 text-gray-500 cursor-not-allowed' : 'border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/20 text-white'}`}>Next</button>\r\n                                                                            </div>\r\n                                                                        )}\r\n                                                                    </>\r\n                                                                );\r\n                                                            }\r\n                                                            return (\r\n                                                                <>\r\n                                                                    <div className=\"space-y-4\">\r\n                                                                        {displayed.map((tool, idx) => (\r\n                                                                            <article key={`${tool.name}-${tool.dateAdded || idx}`} className=\"flex items-start gap-5 p-4 rounded-3xl bg-[#12121A] border border-white/5 hover:border-white/10 hover:bg-white/[0.03] transition-all cursor-pointer group\" onClick={() => navigateToTool(tool)}>\r\n                                                                                <div className=\"w-20 h-20 flex-shrink-0 overflow-hidden rounded-2xl bg-black/30 border border-white/5 flex items-center justify-center\">\r\n                                                                                    {(() => {\r\n                                                                                        const src = getImageSrc(tool);\r\n                                                                                        if (src) {\r\n                                                                                            return (\r\n                                                                                                <img src={src} alt={tool.name} className=\"w-full h-full object-cover\" loading=\"lazy\" onError={(e) => {\r\n                                                                                                    e.currentTarget.style.display = 'none';\r\n                                                                                                    e.currentTarget.nextSibling.style.display = 'flex';\r\n                                                                                                }} />\r\n                                                                                            );\r\n                                                                                        }\r\n                                                                                        return null;\r\n                                                                                    })()}\r\n                                                                                     <div className=\"hidden w-full h-full items-center justify-center text-2xl\" style={{ display: !getImageSrc(tool) ? 'flex' : 'none' }}>\r\n                                                                                        \r\n                                                                                     </div>\r\n                                                                                </div>\r\n                                                                                <div className=\"flex-1 min-w-0 py-1\">\r\n                                                                                    <div className=\"flex items-start justify-between gap-3\">\r\n                                                                                        <h3 className=\"text-lg font-bold text-white group-hover:text-[#a78bfa] transition-colors truncate\">{tool.name}</h3>\r\n                                                                                        {tool.dateAdded && (<span className=\"text-xs text-gray-500 whitespace-nowrap\">{new Date(tool.dateAdded).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</span>)}\r\n                                                                                    </div>\r\n                                                                                    <p className=\"mt-1 text-sm text-gray-400 line-clamp-2 leading-relaxed\">{tool.description}</p>\r\n                                                                                    <div className=\"mt-3 flex items-center gap-2 flex-wrap\">\r\n                                                                                        {tool.badge && (<span className=\"px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider rounded-md bg-white/5 border border-white/10 text-gray-300\">{tool.badge}</span>)}\r\n                                                                                        {tool.pricing && (<span className={`px-2 py-0.5 text-[10px] font-medium rounded-md border ${\r\n                                                                                            tool.pricing === 'Free' ? 'text-emerald-400 border-emerald-500/20 bg-emerald-500/5' :\r\n                                                                                            'text-blue-400 border-blue-500/20 bg-blue-500/5'\r\n                                                                                        }`}>{tool.pricing}</span>)}\r\n                                                                                    </div>\r\n                                                                                </div>\r\n                                                                            </article>\r\n                                                                        ))}\r\n                                                                    </div>\r\n                                                                    {isMobile && mobileVisibleCount < total && (\r\n                                                                        <div className=\"mt-8 flex justify-center\">\r\n                                                                            <button onClick={loadMoreMobile} className=\"px-6 py-3 rounded-xl bg-white/10 hover:bg-white/20 text-white text-sm font-medium backdrop-blur-md border border-white/20 hover:border-white/30 transition-all\">Load More ({Math.min(mobileVisibleCount + PAGE_SIZE, total)}/{total})</button>\r\n                                                                        </div>\r\n                                                                    )}\r\n                                                                    {!isMobile && total > PAGE_SIZE && (\r\n                                                                        <div className=\"mt-16 flex items-center justify-center gap-2 flex-wrap\">\r\n                                                                            <button onClick={() => updatePage(Math.max(1, page - 1))} disabled={page === 1} aria-label=\"Previous page\" className={`px-4 py-3 rounded-xl text-sm font-medium border transition-colors ${page === 1 ? 'border-white/5 bg-white/5 text-gray-500 cursor-not-allowed' : 'border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/20 text-white'}`}>Prev</button>\r\n                                                                            {buildPageList(Math.ceil(total / PAGE_SIZE), page).map((p, i) => (\r\n                                                                                p === '' ? (\r\n                                                                                    <span key={`dots-${i}`} className=\"px-3 py-3 text-sm text-gray-400\"></span>\r\n                                                                                ) : (\r\n                                                                                    <button key={`page-${p}`} onClick={() => updatePage(p)} aria-current={p === page ? 'page' : undefined} className={`w-10 h-10 flex items-center justify-center rounded-xl text-sm font-medium border transition-all ${p === page ? 'bg-[#FF6B00] text-white border-orange-500 shadow-lg shadow-orange-500/20' : 'border-white/10 bg-white/5 text-gray-300 hover:bg-white/10 hover:text-white hover:border-white/20'}`}>{p}</button>\r\n                                                                                )\r\n                                                                            ))}\r\n                                                                            <button onClick={() => updatePage(Math.min(Math.ceil(total / PAGE_SIZE), page + 1))} disabled={page >= Math.ceil(total / PAGE_SIZE)} aria-label=\"Next page\" className={`px-4 py-3 rounded-xl text-sm font-medium border transition-colors ${page >= Math.ceil(total / PAGE_SIZE) ? 'border-white/5 bg-white/5 text-gray-500 cursor-not-allowed' : 'border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/20 text-white'}`}>Next</button>\r\n                                                                        </div>\r\n                                                                    )}\r\n                                                                </>\r\n                                                            );\r\n                                                        })()}\r\n                                                    </div>\r\n                                                </>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                </section>\r\n                            </main>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                {/* Tool Detail Modal */}\r\n                {\r\n                    selectedTool && (\r\n                        <ToolDetailModal tool={selectedTool} onClose={closeModal} />\r\n                    )\r\n                }\r\n\r\n                {/* Scroll to Top Button */}\r\n                {\r\n                    showScrollTop && (\r\n                        <m.button\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: 20 }}\r\n                            whileHover={{ scale: 1.1 }}\r\n                            whileTap={{ scale: 0.9 }}\r\n                            onClick={scrollToTop}\r\n                            className=\"fixed bottom-8 right-8 z-50 p-3 bg-[#FF6B00] hover:bg-[#ff8533] text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300\"\r\n                            aria-label=\"Scroll to top\"\r\n                        >\r\n                            <svg\r\n                                className=\"w-6 h-6\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                viewBox=\"0 0 24 24\"\r\n                            >\r\n                                <path\r\n                                    strokeLinecap=\"round\"\r\n                                    strokeLinejoin=\"round\"\r\n                                    strokeWidth={2}\r\n                                    d=\"M5 10l7-7m0 0l7 7m-7-7v18\"\r\n                                />\r\n                            </svg>\r\n                        </m.button>\r\n                    )\r\n                }\r\n            </LazyMotion>\r\n            <ChatBot />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n"],"names":["ToolOfTheDay","tool","setTool","useState","t","useLanguage","API_URL","process","useEffect","fetch","concat","then","res","json","data","pickStaticTool","catch","err","console","error","allTools","toolsData","flatMap","cat","tools","length","today","Date","toISOString","slice","hash","i","charCodeAt","index","Math","abs","_objectSpread","category","toSlug","val","String","trim","toLowerCase","replace","imageSrc","item","image","logo","name","_jsxs","className","children","_jsx","Link","to","src","alt","onError","e","target","onerror","style","display","nextSibling","FaStar","size","shortDescription","description","tags","hashtags","map","tag","FaArrowRight","_ref","onClose","getToolKey","url","id","saved","setSaved","saveCount","setSaveCount","copied","setCopied","raw","localStorage","getItem","arr","JSON","parse","key","includes","onKey","window","addEventListener","removeEventListener","document","body","overflow","toggleBookmark","stopPropagation","filter","x","push","setItem","stringify","log","pricing","split","w","charAt","toUpperCase","join","rating","users","ReactDOM","zIndex","onClick","role","scrollbarWidth","msOverflowStyle","FaTimes","parentElement","classList","add","innerHTML","badge","isNew","FaBookmark","FaRegBookmark","features","feature","FaChartLine","useCases","useCase","FaDollarSign","FaUsers","FaTag","href","addRefToUrl","link","rel","FaExternalLinkAlt","copyToClipboard","navigator","clipboard","writeText","setTimeout","FaCheck","FaCopy","MobileCategoryTabs","categories","activeId","onSelect","listRef","useRef","activeRef","el","current","list","elRect","getBoundingClientRect","listRect","left","right","scrollIntoView","behavior","inline","block","top","WebkitOverflowScrolling","ref","scrollBehavior","c","isActive","WebkitTapHighlightColor","label","MobileTopNav","onCategorySelect","onChoiceClick","onLogoClick","searchQuery","onSearchChange","dropdownOpen","setDropdownOpen","isSearchOpen","setIsSearchOpen","dropdownRef","searchInputRef","handleClickOutside","contains","focus","AnimatePresence","mode","m","div","initial","opacity","animate","exit","transition","duration","value","FaArrowLeft","onSubmit","preventDefault","blur","FaSearch","type","enterKeyHint","onChange","placeholder","Logo","button","whileHover","scale","whileTap","span","rotate","y","handleCategorySelect","activePricing","setActivePricing","sortOrder","setSortOrder","open","setOpen","options","o","summaryLabel","_options$find","_options$find2","pricingLabel","find","sortLabel","createPortal","_Fragment","damping","stiffness","opt","active","quickReplies","action","ChatBot","isOpen","setIsOpen","messages","setMessages","text","sender","input","setInput","isTyping","setIsTyping","context","setContext","lastIntent","lastTopic","lastResults","shownCount","userPreferences","budget","messagesEndRef","inputRef","chatRef","event","getInitialTools","Array","isArray","setAllTools","scrollToBottom","_messagesEndRef$curre","async","api","default","response","get","liveTools","localTools","toolsMap","Map","forEach","set","source","snapshotUrl","LogoImage","isAiToolsChoice","mergedTools","from","values","fetchTools","generateSmartResponse","userInput","newPreferences","getUpdatedPreferences","currentPrefs","lower","updates","prev","tempContext","match","detectIntent","handleStats","count","mentionedTools","t1","t2","handleComparison","handlePricing","handleEducation","eduTools","_t$category","_t$pricing","_t$pricing2","topEdu","sort","a","b","handleContinuation","nextBatch","handleDiscovery","currentContext","currentTools","categoryKeywords","results","content","some","k","query","_t$tags","_t$pricing3","aScore","matched","handleUnknown","handleSend","arguments","undefined","newUserMsg","now","botResponse","newBotMsg","background","backdropFilter","WebkitBackdropFilter","border","boxShadow","motion","animationDelay","Sparkles","clearChat","title","Eraser","X","msg","idx","delay","qr","onKeyPress","disabled","FaPaperPlane","FaMagic","pricingOptions","icon","color","getSelected","option","dateFilter","handleDateFilter","handleSortOrder","nameFilter","handleNameFilter","expandedSection","setExpandedSection","showCustomDate","setShowCustomDate","showLetterSelector","setShowLetterSelector","alphabet","letter","indexOf","splice","toggleLetter","Home","showAllCategories","setShowAllCategories","showAllStickyCategories","setShowAllStickyCategories","location","useLocation","history","useHistory","selectedTool","setSelectedTool","useMemo","topPicks","closeModal","useCallback","navigateToTool","comingSoon","toolSlug","categorySlug","setSearchQuery","suggestions","setSuggestions","isSearchFocused","setIsSearchFocused","isHovered","setIsHovered","activeFilter","setActiveFilter","setDateFilter","setNameFilter","PAGE_SIZE","showMoreMenu","setShowMoreMenu","page","setPage","params","URLSearchParams","search","p","parseInt","isNaN","mobileVisibleCount","setMobileVisibleCount","debounceRef","activeSuggestionIndex","setActiveSuggestionIndex","isMobile","setIsMobile","innerWidth","mobileSheetOpen","setMobileSheetOpen","showScrollTop","setShowScrollTop","isInitialLoading","setIsInitialLoading","showStickyNav","setShowStickyNav","stickyNavRef","stickyHeight","setStickyHeight","sidebarOpen","setSidebarOpen","viewMode","setViewMode","searchSectionRef","categoryHeadingRef","stickyCatsRef","mainCatsRef","ticking","handleScroll","requestAnimationFrame","scrollY","passive","observer","IntersectionObserver","entry","shouldShow","isIntersecting","boundingClientRect","offsetHeight","threshold","rootMargin","observe","disconnect","onDocClick","inSticky","inMain","animationFrameId","targetScroll","scrollLeft","isAnimating","animateScroll","diff","onWheel","deltaY","maxScroll","scrollWidth","clientWidth","max","min","onScroll","cancelAnimationFrame","handleScrollFallback","handler","detail","mobilePlaceholderTexts","desktopPlaceholderTexts","currentPlaceholderIndex","setCurrentPlaceholderIndex","placeholderFade","setPlaceholderFade","isPlaceholderPaused","setIsPlaceholderPaused","activePlaceholders","timer","setInterval","displayDuration","clearInterval","handleResize","rawUsername","approvedTools","setApprovedTools","cached","_unused","isLoading","setIsLoading","_unused2","envUrl","host","hostname","test","_unused3","_unused4","getFaviconUrl","URL","_unused5","getImageSrc","tick","floor","base","cache","headers","ok","url2","validTools","fetchApprovedTools","isRecent","date","convertedApprovedTools","snapshot","snap","withLeading","startsWith","_unused6","buildSnapshotUrl","fallback","rawCategory","normalizedCategory","parsed","createdAt","updatedAt","safeTime","_id","dateAdded","mergedToolsData","staticCategoriesMap","newCategoriesMap","has","displayName","mobileCategories","localeCompare","toolList","fuse","FuseCtor","FuseNamespace","keys","weight","includeScore","handleInputChange","targetEl","getElementById","clearTimeout","r","filteredTools","result","searchLower","matchesSearch","matchesCategory","matchesPricing","toolPricing","matchesDate","toolDate","getDate","getMonth","getFullYear","d","Number","matchesNameFilter","firstChar","nameA","nameB","allToolsFlatSorted","searchHits","all","_location$hash","toolsEl","isFirstRun","closest","pathname","toString","updatePage","next","loadMoreMobile","buildPageList","totalPages","_","pages","windowStart","windowEnd","visibleCategories","hiddenCategories","priorityIds","Boolean","debugMode","_unused7","curatedBase","userCats","Set","dataCats","allSet","extra","LazyMotion","domAnimation","backgroundImage","transformOrigin","backgroundBlendMode","height","maskImage","WebkitMaskImage","toolsSection","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","FaChevronRight","querySelector","scrollTo","reduce","acc","PricingDropdown","UnifiedSortDropdown","MobileSortMenu","Player","autoplay","loop","width","margin","total","displayed","ceil","start","end","patternIndex","spanClass","ToolCard","loading","currentTarget","toLocaleDateString","month","day","ToolDetailModal","scrollToTop"],"sourceRoot":""}